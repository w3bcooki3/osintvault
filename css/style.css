        :root {
            --primary: #007bff; /* Slightly less vibrant blue, more authoritative */
            --primary-dark: #0056b3;
            --secondary: #ff6b35; /* Strong accent for highlights */
            --accent: #28a745; /* Positive action/success */
            --danger: #dc3545;
            --warning: #ffaa00;
            --success: #28a745;

            /* Darker, more professional greyscale for dark theme */
            --bg-primary: #0C1017; /* Deeper primary background */
            --bg-secondary: #171E28; /* Slightly lighter card/section background */
            --bg-tertiary: #212B3B; /* Input/hover background */
            --bg-card: #1E2736;     /* Card background */

            --text-primary: #E0E6F0; /* Brighter text for contrast */
            --text-secondary: #9BAEC8; /* Muted text */
            --text-muted: #6A7F9D;    /* Even more muted text */

            --border: #3D4C61;      /* Stronger but still subtle border */
            --border-light: #526680; /* Lighter border for dividers */

            /* Softer, multi-layered shadow */
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.2), 0 4px 16px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 8px 30px rgba(0, 0, 0, 0.3), 0 16px 60px rgba(0, 0, 0, 0.2);

            --glow: 0 0 15px rgba(0, 123, 255, 0.4); /* Adjusted glow for new primary */
            --primary-shadow-color: rgba(0, 123, 255, 0.3); /* For primary button shadow */
            --primary-shadow-color-hover: rgba(0, 123, 255, 0.4);

            /* Very subtle gradient, mainly for active states or branding */
            --gradient-primary: linear-gradient(135deg, #007bff, #0056b3);
            --gradient-secondary: linear-gradient(135deg, #dc3545, #b02a37);
            --gradient-accent: linear-gradient(135deg, #28a745, #1e8738);
            /* Softened background gradient */
            --gradient-bg: linear-gradient(135deg, #0C1017, #171E28);

            /* Default Tab Colors */
            --tab-color-default: var(--primary);
            --tab-color-red: #e74c3c;
            --tab-color-blue: #3498db;
            --tab-color-green: #2ecc71;
            --tab-color-yellow: #f1c40f;
            --tab-color-purple: #9b59b6;
            --tab-color-orange: #e67e22;
        }

        [data-theme="light"] {
            --primary: #007bff;
            --primary-dark: #0056b3;
            --secondary: #6c757d;
            --accent: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --success: #28a745;

            /* Lighter, professional greyscale for light theme */
            --bg-primary: #FFFFFF;
            --bg-secondary: #F7F9FC; /* Slightly off-white for sections */
            --bg-tertiary: #E8EEF5; /* Light grey for inputs/hovers */
            --bg-card: #FFFFFF;    /* White card background */

            --text-primary: #2C3E50; /* Darker text for readability */
            --text-secondary: #607D8B; /* Muted grey text */
            --text-muted: #95A5A6;    /* Even more muted */

            --border: #CFD8DC; /* Light grey border */
            --border-light: #ECEFF1; /* Very light border */

            --glow: 0 0 10px rgba(0, 123, 255, 0.2);
            --shadow: 0 1px 4px rgba(0, 0, 0, 0.08), 0 2px 8px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.12), 0 8px 24px rgba(0, 0, 0, 0.08);

            --gradient-primary: linear-gradient(135deg, #007bff, #0056b3);
            --gradient-secondary: linear-gradient(135deg, #dc3545, #b02a37);
            --gradient-accent: linear-gradient(135deg, #28a745, #218838);
            --gradient-bg: linear-gradient(135deg, #F7F9FC, #E8EEF5);

            /* Default Tab Colors (Light Theme) */
            --tab-color-default: var(--primary);
            --tab-color-red: #c0392b;
            --tab-color-blue: #2980b9;
            --tab-color-green: #27ae60;
            --tab-color-yellow: #f39c12;
            --tab-color-purple: #8e44ad;
            --tab-color-orange: #d35400;


            --nav-bg-primary: #f8fafc;
            --nav-bg-secondary: #ffffff;
            --nav-bg-tertiary: #f1f5f9;
            --nav-bg-card: rgba(255, 255, 255, 0.9);
            --nav-text-primary: #1e293b;
            --nav-text-secondary: #64748b;
            --nav-text-muted: #94a3b8;
            --nav-accent-primary: #0ea5e9;
            --nav-accent-secondary: #8b5cf6;
            --nav-accent-success: #10b981;
            --nav-accent-warning: #f59e0b;
            --nav-accent-danger: #ef4444;
            --nav-border-primary: #e2e8f0;
            --nav-border-secondary: #cbd5e1;
            --nav-shadow-light: rgba(0, 0, 0, 0.05);
            --nav-shadow-medium: rgba(0, 0, 0, 0.1);
            --nav-shadow-heavy: rgba(0, 0, 0, 0.25);
            --nav-glow-primary: rgba(14, 165, 233, 0.3);
            --nav-glow-secondary: rgba(139, 92, 246, 0.3);
            --nav-grid-color: rgba(148, 163, 184, 0.1);
        }

        [data-theme="dark"] {
            /* Dark mode colors */
            --nav-bg-primary: #0f172a;
            --nav-bg-secondary: #1e293b;
            --nav-bg-tertiary: #334155;
            --nav-bg-card: rgba(30, 41, 59, 0.9);
            --nav-text-primary: #f8fafc;
            --nav-text-secondary: #cbd5e1;
            --nav-text-muted: #64748b;
            --nav-accent-primary: #06b6d4;
            --nav-accent-secondary: #a855f7;
            --nav-accent-success: #22c55e;
            --nav-accent-warning: #fbbf24;
            --nav-accent-danger: #f87171;
            --nav-border-primary: #334155;
            --nav-border-secondary: #475569;
            --nav-shadow-light: rgba(0, 0, 0, 0.3);
            --nav-shadow-medium: rgba(0, 0, 0, 0.5);
            --nav-shadow-heavy: rgba(0, 0, 0, 0.8);
            --nav-glow-primary: rgba(6, 182, 212, 0.4);
            --nav-glow-secondary: rgba(168, 85, 247, 0.4);
            --nav-grid-color: rgba(148, 163, 184, 0.05);
        }



        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--gradient-bg); 
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            transition: background 0.5s ease, color 0.5s ease;
        }

        /* New class for body to prevent scrolling when mobile menu/sidebar is open */
        body.no-scroll {
            overflow: hidden;
        }

        .container {
            width: 100%;
            max-width: 100%;
            padding: 0;
            margin: 0 auto; 
        }

        /* Header Styles - Redesigned with --nav- colors (Fixed Responsive) */
        header {
            background: linear-gradient(135deg, var(--nav-bg-card), var(--nav-bg-secondary));
            backdrop-filter: blur(25px) saturate(180%);
            border-bottom: 1px solid var(--nav-border-primary);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 
                0 8px 32px var(--nav-shadow-light),
                0 2px 16px var(--nav-shadow-medium),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        /* Animated background grid */
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(var(--nav-grid-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--nav-grid-color) 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.3;
            animation: gridMove 20s linear infinite;
            pointer-events: none;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(20px, 20px); }
        }

        /* Floating glow effect */
        header::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(
                circle at 30% 50%, 
                var(--nav-glow-primary) 0%, 
                transparent 25%
            ),
            radial-gradient(
                circle at 70% 30%, 
                var(--nav-glow-secondary) 0%, 
                transparent 25%
            );
            opacity: 0.1;
            animation: floatGlow 15s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes floatGlow {
            0%, 100% { transform: translate(-10px, -10px) rotate(0deg); }
            33% { transform: translate(10px, -20px) rotate(120deg); }
            66% { transform: translate(-20px, 10px) rotate(240deg); }
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            max-width: 1800px;
            margin: 0 auto;
            padding: 24px 40px;
            width: 100%;
            box-sizing: border-box;
            position: relative;
            z-index: 2;
        }


        /* Left section - Logo and Title */
        .logo-and-title-container {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-shrink: 0;
            min-width: 0;
            margin-right: auto;
            position: relative;
        }

        /* Logo with enhanced effects */
        .header-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 65px;
            position: relative;
            flex-shrink: 0;
        }

        .header-logo::before {
            content: '';
            position: absolute;
            inset: -8px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--nav-accent-primary), var(--nav-accent-secondary));
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        .header-logo:hover::before {
            opacity: 0.2;
        }

        .osintvault-logo-img {
            display: block;
            max-height: 100%;
            width: auto;
            filter: 
                drop-shadow(0 0 15px var(--nav-glow-primary))
                drop-shadow(0 0 30px var(--nav-glow-secondary));
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            animation: logoPulse 4s ease-in-out infinite;
        }

        @keyframes logoPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .osintvault-logo-img:hover {
            filter: 
                drop-shadow(0 0 25px var(--nav-glow-primary))
                drop-shadow(0 0 45px var(--nav-glow-secondary));
            transform: scale(1.1) rotate(5deg);
        }

        /* Text group styling */
        .header-text-group {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: center;
            flex-grow: 1;
            min-width: 0;
            position: relative;
        }

        .header-title {
            font-size: 2.4em;
            font-weight: 800;
            background: linear-gradient(135deg, var(--nav-accent-primary), var(--nav-accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-family: 'Outfit', sans-serif;
            letter-spacing: -1px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            position: relative;
            animation: titleShimmer 3s ease-in-out infinite;
        }

        @keyframes titleShimmer {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .header-tagline {
            font-size: 0.85rem;
            color: var(--nav-text-secondary);
            font-family: 'Inter', sans-serif;
            margin-top: 4px;
            font-weight: 500;
            opacity: 0.8;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Right section - Controls */
        .controls {
            display: flex;
            gap: 16px;
            align-items: center;
            flex-wrap: wrap;
            flex-shrink: 0;
            min-width: 0;
            justify-content: flex-end;
            margin-left: auto;
        }

        /* Enhanced search container */
        .search-container {
            position: relative;
            min-width: 350px;
            display: flex;
            align-items: center;
            background: var(--nav-bg-tertiary);
            border-radius: 16px;
            padding: 4px;
            box-shadow: 
                0 4px 20px var(--nav-shadow-light),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid var(--nav-border-primary);
            transition: all 0.3s ease;
        }

        .search-container:hover {
            box-shadow: 
                0 8px 30px var(--nav-shadow-medium),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
            border-color: var(--nav-accent-primary);
        }

        .search-input {
            width: 100%;
            padding: 16px 50px 16px 20px;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            background: transparent;
            color: var(--nav-text-primary);
            transition: all 0.3s ease;
            flex-grow: 1;
            font-weight: 500;
        }

        .search-input::placeholder {
            color: var(--nav-text-muted);
            opacity: 0.8;
        }

        .search-input:focus {
            outline: none;
            background: var(--nav-bg-card);
            box-shadow: 0 0 0 2px var(--nav-glow-primary);
        }

        .search-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--nav-text-secondary);
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .search-container:hover .search-icon {
            color: var(--nav-accent-primary);
            transform: translateY(-50%) scale(1.1);
        }

        /* Enhanced search scope select */
        #searchScopeSelect {
            margin-left: 12px;
            padding: 12px 32px 12px 16px;
            border-radius: 12px;
            background: var(--nav-bg-card);
            color: var(--nav-text-primary);
            border: 1px solid var(--nav-border-primary);
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 2px 8px var(--nav-shadow-light);
            font-weight: 500;
            font-size: 13px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%20viewBox%3D%220%200%20292.4%20292.4%22%3E%3Cpath%20fill%3D%22%236A7F9D%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13.6-6.4H19a17.6%2017.6%200%200%200-13.6%206.4%2017.6%2017.6%200%200%200%200%2025.2l128%20128c6.9%206.9%2017.9%206.9%2024.7%200l128-128a17.6%2017.6%200%200%200%200-25.2z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 12px top 50%;
            background-size: 12px auto;
        }

        #searchScopeSelect:focus {
            outline: none;
            border-color: var(--nav-accent-primary);
            box-shadow: 0 0 0 3px var(--nav-glow-primary);
        }

        #searchScopeSelect:hover {
            background: var(--nav-bg-tertiary);
            border-color: var(--nav-accent-primary);
        }

        /* Mobile menu toggle */
        .mobile-menu-toggle {
            display: none; /* Hidden by default, shown in media query */
            background: var(--nav-bg-tertiary);
            border: 1px solid var(--nav-border-primary);
            border-radius: 8px;
            padding: 8px 12px;
            color: var(--nav-text-primary);
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mobile-menu-toggle:hover {
            background: var(--nav-bg-card);
            box-shadow: 0 4px 15px var(--nav-shadow-light);
        }

        /* Mobile Sidebar Menu (NEW) */
        .mobile-sidebar-menu {
            position: fixed;
            top: 0;
            right: -320px; /* Off-screen initially */
            width: 280px; /* Adjusted width for mobile */
            max-width: 80vw; /* Ensure it doesn't overflow very small screens */
            height: 100vh;
            background: var(--nav-bg-card);
            backdrop-filter: blur(25px) saturate(180%);
            border-left: 1px solid var(--nav-border-primary);
            z-index: 1000; /* High z-index to appear on top */
            transition: right 0.3s ease-in-out;
            box-shadow: -5px 0 15px rgba(0,0,0,0.3);
            overflow-y: auto; /* Allow scrolling for long menus */
            padding: 20px;
        }

        .mobile-sidebar-menu.active {
            right: 0; /* Slide in when active */
        }

        .mobile-sidebar-menu .close-menu-btn {
            background: none;
            border: none;
            color: var(--nav-text-primary);
            font-size: 24px;
            position: absolute; /* Changed to absolute for consistent positioning within menu */
            top: 10px;
            right: 10px;
            cursor: pointer;
            z-index: 1001; /* Ensure it's above menu content */
            padding: 5px;
            border-radius: 5px;
            transition: background 0.2s ease;
        }

        .mobile-sidebar-menu .close-menu-btn:hover {
            background: var(--bg-tertiary);
        }

        .mobile-sidebar-menu .mobile-menu-content {
            padding-top: 40px; /* Space for the close button */
        }

        .mobile-sidebar-menu .mobile-nav-cloned {
            display: flex;
            flex-direction: column; /* Stack tabs vertically in mobile menu */
            width: 100%;
            align-items: flex-start; /* Align tabs to the left */
            border: none; /* Remove border */
            box-shadow: none; /* Remove shadow */
            padding: 0; /* Remove padding */
            margin: 0; /* Remove margin */
            background: none; /* Remove background */
        }

        .mobile-sidebar-menu .mobile-nav-cloned .nav-tab {
            width: 100%; /* Make tabs full width */
            justify-content: flex-start; /* Align text to left */
            flex-direction: row; /* Icon and text in a row */
            padding: 12px 15px; /* Larger tap target */
            font-size: 1rem;
            gap: 10px;
            margin-bottom: 5px; /* Space between items */
            border-radius: 8px; /* Restore some rounding */
        }
        .mobile-sidebar-menu .mobile-nav-cloned .nav-tab i {
            margin-bottom: 0;
        }

        .mobile-sidebar-menu .mobile-controls-cloned {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--nav-border-primary);
        }
        .mobile-sidebar-menu .mobile-controls-cloned .btn {
            width: 100%;
            justify-content: center;
        }
        .mobile-sidebar-menu .mobile-controls-cloned .search-container {
            width: 100%;
            max-width: none;
            padding: 8px;
            flex-direction: column;
            align-items: stretch;
        }
        .mobile-sidebar-menu .mobile-controls-cloned .search-input {
            padding: 12px 40px 12px 15px;
            margin-bottom: 10px;
        }
        .mobile-sidebar-menu .mobile-controls-cloned #searchScopeSelect {
            margin-left: 0;
            margin-top: 0;
            width: 100%;
        }

        @media (max-width: 1200px) {
            .dashboard {
                grid-template-columns: 1fr;
                margin: 20px 20px;
                width: calc(100% - 40px);
                gap: 20px;
            }
            .header-content {
                padding: 15px 20px;
            }
            .main-nav-tabs {
                padding: 8px 10px;
                gap: 5px;
            }
            .nav-tab {
                padding: 12px 14px;
                font-size: 0.85rem;
            }
            .search-container {
                min-width: 250px;
            }
        }

        @media (max-width: 992px) {
            .header-content {
                flex-direction: column;
                align-items: center;
                padding: 15px;
                gap: 15px;
            }
            .logo-and-title-container {
                justify-content: center;
                width: 100%;
                margin-right: 0;
            }
            .controls {
                width: 100%;
                justify-content: center;
                margin-left: 0;
                order: 1;
            }
            .search-container {
                min-width: auto;
                width: 100%;
                max-width: 450px;
                flex-direction: row;
                padding: 8px;
            }
            .search-input {
                padding: 12px 40px 12px 15px;
                margin-bottom: 0;
            }
            #searchScopeSelect {
                margin-left: 10px;
                margin-top: 0;
                width: auto;
            }

            .tools-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                gap: 15px;
            }
            .tool-card {
                padding: 20px;
            }
            .tool-title {
                font-size: 1.05rem;
            }
            .tool-url {
                font-size: 0.75rem;
            }

            .pre-templates-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .pre-templates-sidebar {
                position: static;
                margin-bottom: 0;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 0;
            }

            .dashboard {
                margin: 15px 10px;
                width: calc(100% - 20px);
                gap: 15px;
            }

            .header-content {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                padding: 12px 15px;
                gap: 10px;
            }
            .logo-and-title-container {
                justify-content: flex-start;
                width: auto;
                flex-grow: 1;
            }
            .header-text-group {
                display: none;
            }
            .controls {
                display: none;
                order: unset;
            }
            .mobile-menu-toggle {
                display: block;
                order: 2;
            }
            .header-logo {
                height: 50px;
            }

            .main-nav-tabs {
                padding: 4px;
                border-radius: 10px;
                margin: 0 10px;
                flex-wrap: wrap;
                justify-content: center;
            }
            .nav-tab {
                padding: 8px 10px;
                font-size: 0.75rem;
                gap: 5px;
                flex-direction: column;
                text-align: center;
                min-width: 65px;
            }
            .nav-tab i {
                font-size: 0.9rem;
                margin-bottom: 2px;
            }
            .sub-nav-tabs {
                margin: 10px 0;
                padding: 3px;
                border-radius: 8px;
            }
            .sub-nav-tab {
                padding: 6px 10px;
                font-size: 0.7rem;
                min-height: 28px;
            }
            .stat-item:nth-child(2n) {
                border-right: none;
            }
            .stat-item:last-child {
                border-right: none;
            }

            .main-content {
                padding: 15px;
            }
            .content-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            .content-title {
                font-size: 24px;
                width: 100%; 
                text-align: center;
            }
            .content-header .controls {
                display: flex;
                flex-direction: column;
                align-items: center;
                width: 100%;
                gap: 10px;
            }
            .content-header .btn {
                width: 100%;
                justify-content: center;
            }

            .tools-grid, .tools-list {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            .tools-list .tool-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            .tools-list .tool-actions {
                margin-left: 0;
                width: 100%;
                justify-content: flex-start;
                flex-wrap: wrap;
                gap: 5px;
            }
            .tool-card {
                padding: 15px;
            }
            .tool-title {
                font-size: 15px;
            }
            .tool-url {
                font-size: 10px;
            }

            .bulk-actions {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
                padding: 10px;
            }
            .bulk-actions .btn {
                width: 100%;
                justify-content: center;
            }

            .analytics-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            .analytics-card {
                padding: 20px;
            }
            .analytics-value {
                font-size: 2.5rem;
            }
            .analytics-list li {
                font-size: 13px;
                padding: 8px 0;
            }

            .threat-item {
                padding: 15px;
                margin-bottom: 10px;
            }
            .threat-header h4 {
                font-size: 1.1em;
            }
            .threat-level {
                font-size: 0.7em;
                padding: 3px 8px;
            }

            .modal-content {
                padding: 25px;
                border-radius: 12px;
            }
            .form-group label {
                font-size: 0.9em;
                margin-bottom: 8px;
            }
            .form-group input,
            .form-group select,
            .form-group textarea {
                padding: 10px;
                font-size: 13px;
                border-radius: 8px;
            }
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                border-radius: 10px;
            }
            .btn2 {
                padding: 10px 15px;
                font-size: 13px;
                border-radius: 10px;
            }

            .toast {
                max-width: calc(100% - 40px);
                margin: 0 auto;
                text-align: center;
                right: auto;
                left: 50%;
                transform: translateX(-50%);
            }

            .handbook-container {
                grid-template-columns: 1fr;
                gap: 0;
                margin: 0;
                width: 100%;
            }
            .handbook-sidebar {
                position: fixed;
                left: -320px;
                top: 0;
                bottom: 0;
                width: 300px;
                z-index: 1000;
                border-radius: 0;
                transition: left 0.3s ease;
                overflow-y: auto;
                background: var(--nav-bg-card);
                border-right: 1px solid var(--nav-border-primary);
                box-shadow: 5px 0 15px rgba(0,0,0,0.3);
            }
            .handbook-sidebar.mobile-open {
                left: 0;
            }
            .handbook-mobile-toggle {
                display: flex;
                position: fixed;
                bottom: 20px;
                right: 20px;
                z-index: 1001;
                width: 50px;
                height: 50px;
                font-size: 24px;
                background: var(--primary);
                color: white;
                border-radius: 50%;
                justify-content: center;
                align-items: center;
                box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            }
            
            body.handbook-overlay-active {
                overflow: hidden;
            }
            .handbook-content-container {
                padding: 15px;
                margin-top: 0;
                width: 100%; 
            }
            .notes-header {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }
            .notes-search-container {
                margin-left: 0;
                width: 100%;
                order: 1; 
            }
            .new-note-btn {
                width: 100%;
                justify-content: center;
                order: 3;
            }
            #noteSortFilter {
                width: 100%;
                order: 2;
            }
            .notes-grid {
                grid-template-columns: 1fr;
            }
            .note-editor-actions {
                flex-direction: column;
                gap: 10px;
            }
            .formatting-toolbar {
                padding: 8px;
                flex-wrap: wrap;
                justify-content: center;
                gap: 3px;
            }
            .formatting-btn {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }

            #intelligenceVaultParentTabs,
            #customVaultEntryParentTabs {
                flex-direction: column; /* Stack parent tabs vertically */
                width: 100%;
                margin: 15px 0 0 0; /* Adjust margins for stacking */
                padding: 5px; /* Adjust padding for stacked buttons */
                box-shadow: none; /* Remove shadow if desired for stacked appearance */
                border-radius: 8px;
            }

            #intelligenceVaultParentTabs .nav-tab,
            #customVaultEntryParentTabs .nav-tab {
                width: 100%; /* Make each button fill the container */
                justify-content: flex-start; /* Align content to the left within button */
                margin-bottom: 5px; /* Add space between stacked buttons */
                padding: 10px 15px; /* Adjust padding */
                font-size: 0.8rem;
                flex-direction: row; /* Keep icon and text in a row within each button */
            }

            #intelligenceVaultChildTabs,
            #customVaultEntryChildTabs {
                flex-direction: column; /* Stack child tabs vertically */
                width: 100%;
                margin: 10px 0 0 0; /* Adjust margins for stacking */
                padding: 5px; /* Adjust padding for stacked buttons */
                box-shadow: none; /* Remove shadow if desired for stacked appearance */
                border-radius: 8px;
            }

            #intelligenceVaultChildTabs .sub-nav-tab,
            #customVaultEntryChildTabs .sub-nav-tab {
                width: 100%; /* Make each button fill the container */
                justify-content: flex-start; /* Align content to the left within button */
                margin-bottom: 5px; /* Add space between stacked buttons */
                padding: 8px 15px; /* Adjust padding */
                font-size: 0.75rem;
                flex-direction: row; /* Keep icon and text in a row within each button */
            }
        }

        @media (max-width: 480px) {
            .dashboard {
                margin: 10px 5px; /* Even tighter margins for very small screens */
                width: calc(100% - 10px);
                gap: 10px;
            }
            .header-content {
                padding: 8px 10px;
            }
            .header-logo {
                height: 40px; /* Smallest logo size */
            }
            .main-nav-tabs {
                margin: 0 5px;
                padding: 3px;
            }
            .nav-tab {
                padding: 6px 8px;
                font-size: 0.65rem;
                min-width: 60px;
            }
            .sub-nav-tabs {
                margin: 8px 0;
                padding: 2px;
            }
            .sub-nav-tab {
                padding: 4px 8px;
                font-size: 0.6rem;
                min-height: 25px;
            }

            #intelligenceVaultParentTabs .nav-tab,
            #customVaultEntryParentTabs .nav-tab,
            #intelligenceVaultChildTabs .sub-nav-tab,
            #customVaultEntryChildTabs .sub-nav-tab {
                padding: 8px 10px; /* Make them even tighter */
                font-size: 0.7rem;
                margin-bottom: 3px; /* Smaller gap */
            }
            .main-content {
                padding: 10px;
            }
            .content-title {
                font-size: 20px;
            }
            .tool-card {
                padding: 10px;
            }
            .tool-title {
                font-size: 14px;
            }
            .tool-url {
                font-size: 9px;
            }
            .tag {
                padding: 3px 8px;
                font-size: 0.7rem;
            }
            .modal-content {
                padding: 20px;
            }
            .form-group input, .form-group select, .form-group textarea {
                padding: 8px;
                font-size: 12px;
            }
            .btn, .btn2 {
                padding: 8px 12px;
                font-size: 12px;
            }
            .notes-empty-state, .empty-state {
                padding: 30px 10px;
            }
            .notes-empty-state h3, .empty-state h3 {
                font-size: 1.2em;
            }
            .notes-empty-state p, .empty-state p {
                font-size: 0.85em;
            }
            .notes-empty-state i, .empty-state i {
                font-size: 48px;
            }
            .theme-toggle, .handbook-mobile-toggle {
                width: 45px;
                height: 45px;
                font-size: 20px;
            }
            #desktopRecommendationModal .modal-content {
                padding: 20px;
            }
            #desktopRecommendationModal h3 {
                font-size: 18px;
            }
            #desktopRecommendationModal p {
                font-size: 13px;
            }
            /* Dork assistant adjustments */
            .dork-subtab-content > div { /* Target the flex container */
                flex-direction: column; /* Stack columns */
            }
            .dork-subtab-content > div > div { /* Target the flex children (builder and preview) */
                width: 100%;
                max-width: none; /* Remove max-width constraint */
            }
            .pre-templates-sidebar .category-item {
                flex-direction: row; /* Keep items in a row */
                text-align: left;
                padding: 8px 10px;
                font-size: 0.8em;
            }
            .pre-templates-sidebar .category-item i {
                font-size: 1em;
                margin-right: 5px;
            }
            .pre-templates-sidebar .category-item span {
                flex-grow: 1;
            }
            .pre-templates-sidebar .category-item .template-count {
                font-size: 0.7em;
                padding: 2px 6px;
            }
            .dork-operator-btn {
                padding: 6px 10px;
                font-size: 12px;
            }
            #savedQueriesSearch, #preTemplateSearchInput {
                max-width: 100%; /* Allow search inputs to fill width */
                margin-right: 0 !important; /* Remove specific margin */
                margin-bottom: 10px; /* Add some space below */
            }
            .content-header .controls button { /* Target buttons in content header when stacked */
                margin-right: 0 !important;
                width: 100%;
            }

            /* Investigation Wall adjustments */
            .wall-header {
                padding: 1.5rem 1rem;
            }
            .section-title {
                font-size: clamp(1.8rem, 8vw, 3rem); /* Adjust font size range for smaller screens */
                margin-bottom: 0.8rem;
            }
            .section-subtitle {
                font-size: clamp(0.9rem, 3vw, 1.1rem);
                margin-top: 1rem;
            }
            .evidence-container {
                padding: 0 1rem;
            }
            .evidence-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            .evidence-card {
                padding: 1.2rem;
                border-radius: 12px;
            }
            .card-icon {
                width: 40px;
                height: 40px;
                padding: 10px;
                margin-right: 0.8rem;
            }
            .card-title {
                font-size: 1rem;
            }
            .card-content {
                font-size: 0.9rem;
            }
            .highlight {
                font-size: 0.8rem;
                padding: 1px 6px;
            }
        }

        /* Enhanced buttons */
        .btn {
            padding: 12px 20px;
            border-radius: 12px;
            border: 1px solid var(--nav-border-primary);
            background: linear-gradient(135deg, var(--nav-bg-card), var(--nav-bg-tertiary));
            color: var(--nav-text-primary);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            font-weight: 600;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px var(--nav-shadow-light);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            background: linear-gradient(135deg, var(--nav-bg-tertiary), var(--nav-bg-card));
            box-shadow: 
                0 8px 25px var(--nav-shadow-medium),
                0 0 0 1px var(--nav-accent-primary);
            transform: translateY(-2px);
            border-color: var(--nav-accent-primary);
        }

        .btn:active {
            transform: translateY(0);
            box-shadow: 0 4px 15px var(--nav-shadow-light);
        }

        .btn i {
            font-size: 16px;
            transition: transform 0.3s ease;
        }

        .btn:hover i {
            transform: scale(1.1);
        }

        .btn2 {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 20px;
            transition: all 0.3s ease;
            text-decoration: none;
            position: relative;
            overflow: hidden;
            letter-spacing: 0.2px;
        }

        .btn2::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn2:hover::before {
            left: 100%;
        }


        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 4px 15px var(--primary-shadow-color);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px var(--primary-shadow-color-hover);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
        }

        .btn-secondary:hover {
            background: var(--border);
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        .btn-danger {
            background: var(--gradient-secondary);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 51, 102, 0.3);
        }
        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 51, 102, 0.4);
        }

        .btn-success {
            background: var(--gradient-accent);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
        }
        .btn-success:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 255, 136, 0.4);
        }

        /* Nav */

        .nav-tabs {
            display: flex;
            gap: 0;
            background: var(--nav-bg-nav);
            backdrop-filter: var(--nav-backdrop-blur);
            -webkit-backdrop-filter: var(--nav-backdrop-blur);
            border: 1px solid var(--nav-border-primary);
            border-radius: 16px;
            padding: 8px;
            margin: 0 auto;
            max-width: 100%;
            overflow-x: auto;
            overflow-y: hidden;
            box-shadow: 
                0 20px 25px -5px var(--nav-shadow-light),
                0 10px 10px -5px var(--nav-shadow-medium);
            position: relative;
        }

        .nav-tabs::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                var(--nav-accent-primary), 
                var(--nav-accent-secondary));
            border-radius: 16px;
            opacity: 0.05;
            z-index: 0;
        }

        .nav-tabs::-webkit-scrollbar {
            height: 4px;
        }

        .nav-tabs::-webkit-scrollbar-track {
            background: transparent;
        }

        .nav-tabs::-webkit-scrollbar-thumb {
            background: var(--nav-border-secondary);
            border-radius: 2px;
        }

        .nav-tab {
            position: relative;
            padding: 14px 20px;
            background: none;
            border: none;
            color: var(--nav-text-secondary);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.875rem;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 1;
            min-width: max-content;
            overflow: hidden;
        }

        .nav-tab i {
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .nav-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                var(--nav-accent-primary), 
                var(--nav-accent-secondary));
            opacity: 0;
            border-radius: 12px;
            transition: all 0.3s ease;
            z-index: -1;
        }

        .nav-tab::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            right: 2px;
            bottom: 2px;
            background: var(--nav-bg-nav);
            border-radius: 10px;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: -1;
        }

        .nav-tab:hover:not(.active) {
            color: var(--nav-text-primary);
            transform: translateY(-2px);
        }

        .nav-tab:hover:not(.active)::before {
            opacity: 0.1;
        }

        .nav-tab:hover:not(.active) i {
            color: var(--nav-accent-primary);
            transform: scale(1.1);
        }

        .nav-tab.active {
            color: white;
            transform: translateY(-2px);
            box-shadow: 
                0 10px 15px -3px var(--nav-glow-primary),
                0 4px 6px -2px var(--nav-shadow-medium);
        }

        .nav-tab.active::before {
            opacity: 1;
        }

        .nav-tab.active::after {
            opacity: 1;
        }

        .nav-tab.active i {
            color: white;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            animation: pulse 2s infinite;
        }

        /* Cybersecurity-specific tab colors */
        .nav-tab[data-tab="intelligence-vault"].active::before {
            background: linear-gradient(135deg, var(--nav-accent-primary), #0284c7);
        }

        .nav-tab[data-tab="custom-tabs"].active::before {
            background: linear-gradient(135deg, var(--nav-accent-secondary), #7c3aed);
        }

        .nav-tab[data-tab="analytics"].active::before {
            background: linear-gradient(135deg, var(--nav-accent-success), #059669);
        }

        .nav-tab[data-tab="threats"].active::before {
            background: linear-gradient(135deg, var(--nav-accent-danger), #dc2626);
        }

        .nav-tab[data-tab="dork-assistant"].active::before {
            background: linear-gradient(135deg, var(--nav-accent-warning), #d97706);
        }

        .nav-tab[data-tab="handbook"].active::before {
            background: linear-gradient(135deg, #6366f1, #4338ca);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        /* Responsive design */
        @media (max-width: 1024px) {
            .nav-tab {
                padding: 12px 16px;
                font-size: 0.8rem;
            }
        }

        @media (max-width: 768px) {
            .nav-tabs {
                padding: 6px;
                border-radius: 12px;
                margin: 0 1rem;
            }
            
            .nav-tab {
                padding: 10px 12px;
                font-size: 0.75rem;
                gap: 6px;
            }
            
            .nav-tab i {
                font-size: 0.875rem;
            }
        }

        @media (max-width: 640px) {
            body {
                padding: 1rem;
            }
            
            .nav-tabs {
                margin: 0;
                padding: 4px;
                border-radius: 10px;
            }
            
            .nav-tab {
                padding: 8px 10px;
                font-size: 0.7rem;
                gap: 4px;
                flex-direction: column;
                text-align: center;
                min-width: 70px;
            }
            
            .nav-tab i {
                font-size: 0.75rem;
                margin-bottom: 2px;
            }
        }

        /* Theme toggle for demo */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--nav-bg-secondary);
            border: 1px solid var(--nav-border-primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px var(--nav-shadow-light);
        }

        .theme-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 15px -3px var(--nav-shadow-medium);
        }

        /* Sub-navigation tabs styling */
        .sub-nav-tabs {
            display: flex;
            gap: 2px;
            margin-top: 16px;
            background: var(--nav-bg-tertiary);
            border: 1px solid var(--nav-border-secondary);
            border-radius: 10px;
            padding: 4px;
            flex-wrap: wrap;
            box-shadow: 
                inset 0 1px 3px 0 var(--nav-shadow-light),
                0 1px 2px 0 var(--nav-shadow-light);
            position: relative;
            overflow: hidden;
        }

        .sub-nav-tabs::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.02), 
                transparent);
            animation: shimmer 3s infinite;
            pointer-events: none;
        }

        .sub-nav-tab {
            position: relative;
            padding: 8px 16px;
            background: none;
            border: none;
            color: var(--nav-text-muted);
            cursor: pointer;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 6px;
            font-weight: 500;
            font-size: 0.8rem;
            flex-grow: 1;
            text-align: center;
            min-height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            letter-spacing: 0.025em;
        }

        .sub-nav-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.1), 
                transparent);
            transition: left 0.5s ease;
            pointer-events: none;
        }

        .sub-nav-tab:hover::before {
            left: 100%;
        }

        .sub-nav-tab:hover:not(.active) {
            color: var(--nav-text-primary);
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.05), 
                rgba(255, 255, 255, 0.02));
            transform: translateY(-1px);
            box-shadow: 0 2px 4px var(--nav-shadow-light);
        }

        .sub-nav-tab.active {
            color: white;
            background: linear-gradient(135deg, 
                var(--nav-accent-primary), 
                rgba(14, 165, 233, 0.8));
            box-shadow: 
                0 4px 8px rgba(14, 165, 233, 0.3),
                0 2px 4px var(--nav-shadow-medium),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .sub-nav-tab.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1), 
                transparent, 
                rgba(255, 255, 255, 0.05));
            border-radius: 6px;
            pointer-events: none;
        }

        /* Different sub-tab categories with distinct styling */
        .sub-nav-tab[data-category="tools"].active {
            background: linear-gradient(135deg, var(--nav-accent-primary), #0369a1);
            box-shadow: 0 4px 8px rgba(14, 165, 233, 0.3), 0 2px 4px var(--nav-shadow-medium);
        }

        .sub-nav-tab[data-category="data"].active {
            background: linear-gradient(135deg, var(--nav-accent-success), #047857);
            box-shadow: 0 4px 8px rgba(16, 185, 129, 0.3), 0 2px 4px var(--nav-shadow-medium);
        }

        .sub-nav-tab[data-category="analysis"].active {
            background: linear-gradient(135deg, var(--nav-accent-secondary), #6d28d9);
            box-shadow: 0 4px 8px rgba(139, 92, 246, 0.3), 0 2px 4px var(--nav-shadow-medium);
        }

        .sub-nav-tab[data-category="config"].active {
            background: linear-gradient(135deg, var(--nav-accent-warning), #b45309);
            box-shadow: 0 4px 8px rgba(245, 158, 11, 0.3), 0 2px 4px var(--nav-shadow-medium);
        }

        .sub-nav-tab[data-category="alert"].active {
            background: linear-gradient(135deg, var(--nav-accent-danger), #b91c1c);
            box-shadow: 0 4px 8px rgba(239, 68, 68, 0.3), 0 2px 4px var(--nav-shadow-medium);
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Responsive sub-tabs */
        @media (max-width: 768px) {
            .sub-nav-tabs {
                margin-top: 12px;
                padding: 3px;
                gap: 1px;
            }
            
            .sub-nav-tab {
                padding: 6px 12px;
                font-size: 0.75rem;
                min-height: 32px;
            }
        }

        @media (max-width: 640px) {
            .sub-nav-tab {
                padding: 5px 8px;
                font-size: 0.7rem;
                min-height: 28px;
            }
        }


        /* Footer Styles - Center Tagline moved from Header */
        footer {
            background: linear-gradient(135deg, var(--nav-bg-card), var(--nav-bg-secondary));
            backdrop-filter: blur(25px) saturate(180%);
            border-top: 1px solid var(--nav-border-primary);
            position: relative;
            overflow: hidden;
            margin-top: auto;
            width: 100%;
            box-shadow: 
                0 -8px 32px var(--nav-shadow-light),
                0 -2px 16px var(--nav-shadow-medium),
                inset 0 -1px 0 rgba(255, 255, 255, 0.1);
        }

        /* Animated background grid for footer */
        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(var(--nav-grid-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--nav-grid-color) 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.2;
            animation: gridMoveReverse 25s linear infinite;
            pointer-events: none;
        }

        @keyframes gridMoveReverse {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-20px, -20px); }
        }

        /* Floating glow effect for footer */
        footer::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(
                circle at 70% 30%, 
                var(--nav-glow-secondary) 0%, 
                transparent 25%
            ),
            radial-gradient(
                circle at 30% 70%, 
                var(--nav-glow-primary) 0%, 
                transparent 25%
            );
            opacity: 0.08;
            animation: floatGlowReverse 18s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes floatGlowReverse {
            0%, 100% { transform: translate(10px, 10px) rotate(0deg); }
            33% { transform: translate(-10px, 20px) rotate(-120deg); }
            66% { transform: translate(20px, -10px) rotate(-240deg); }
        }

        .footer-content {
            max-width: 1800px;
            margin: 0 auto;
            padding: 40px;
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            width: 100%;
            box-sizing: border-box;
        }


        @keyframes footerTaglinePulse {
            0%, 100% { 
                transform: scale(1); 
                box-shadow: 0 4px 20px var(--nav-shadow-light); 
            }
            50% { 
                transform: scale(1.02); 
                box-shadow: 0 6px 30px var(--nav-shadow-medium); 
            }
        }

        /* Demo content styling - full width */
        .demo-content {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        /* Main heading styling */
        .demo-content h1 {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--nav-accent-primary), var(--nav-accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-family: 'Outfit', sans-serif;
            letter-spacing: -0.5px;
            margin: 0 0 20px 0;
            animation: titleGlow 4s ease-in-out infinite;
            padding: 10px 10px;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        /* Copyright text styling */
        .demo-content p:first-of-type {
            font-size: 1rem;
            color: var(--nav-text-secondary) !important;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            margin-bottom: 1rem !important;
            opacity: 0.9;
            line-height: 1.5;
        }

        /* Features list styling */
        .demo-content p:last-of-type {
            color: var(--nav-text-muted) !important;
            font-size: 0.875rem !important;
            font-family: 'Inter', sans-serif;
            font-weight: 400;
            opacity: 0.8;
            margin: 0;
            padding: 12px 0 0 0;
            position: relative;
        }

        @media (max-width: 768px) {
            .footer-content {
                padding: 30px 20px;
            }
            
            .demo-content h1 {
                font-size: 1.8rem;
                margin-bottom: 16px;
            }
            
            .demo-content p:first-of-type {
                font-size: 0.9rem;
                line-height: 1.4;
            }
            
            .demo-content p:last-of-type {
                font-size: 0.8rem !important;
            }
        }

        @media (max-width: 480px) {
            .footer-content {
                padding: 25px 15px;
            }
            
            .demo-content h1 {
                font-size: 1.6rem;
                letter-spacing: -0.3px;
            }
            
            .demo-content p:first-of-type {
                font-size: 0.85rem;
            }
            
            .demo-content p:last-of-type {
                font-size: 0.75rem !important;
                line-height: 1.3;
            }
        }

        /* --- COMPACT HEADER CONTROLS --- */
        .header-controls-expanded {
            display: flex;
            flex-wrap: wrap; /* Allows wrapping onto new lines if space is constrained */
            justify-content: space-between; /* Spreads out filters and quick actions */
            align-items: center; /* Vertically aligns items in the middle */
            gap: 20px; /* Space between the two main compact sections */
            max-width: 1800px;
            margin: 0 auto;
            padding: 15px 40px; /* Reduced vertical padding for a more compact look */
            border-top: 1px solid var(--nav-border-primary);
            background: rgba(0,0,0,0.05); /* Subtle background */
            position: relative;
            z-index: 2;
        }

        .header-filters-compact,
        .header-quick-actions-compact {
            display: flex;
            align-items: center;
            flex-wrap: wrap; /* Allows items within these sections to wrap */
            gap: 15px; /* Space between filter/action items */
            /* Remove background, border, shadow from previous sections */
            /* background: none; */
            /* border: none; */
            /* box-shadow: none; */
            padding: 0; /* Remove padding as it's now handled by .header-controls-expanded */
        }

        /* Style the main text labels for "Filters:" and "Quick Actions:" */
        .header-filters-compact > label,
        .header-quick-actions-compact > span {
            font-weight: 600;
            color: var(--text-primary); /* Use primary text color for labels */
            font-size: 15px;
            white-space: nowrap; /* Prevent label from wrapping */
            flex-shrink: 0; /* Prevent labels from shrinking */
        }

        /* Styles for inline form groups (Category, Sort By) */
        .header-filters-compact .form-group-inline {
            display: flex;
            align-items: center;
            gap: 8px; /* Space between "Category:" label and dropdown */
            margin: 0; /* Remove default form-group margin */
        }

        .header-filters-compact .form-group-inline label {
            font-weight: 500; /* Slightly lighter weight for sub-labels */
            color: var(--text-secondary); /* Muted color for sub-labels */
            margin: 0; /* Remove default label margin */
            white-space: nowrap; /* Prevent sub-label from wrapping */
        }

        .header-filters-compact select {
            padding: 8px 12px; /* Adjusted padding for dropdowns */
            border-radius: 8px; /* Softer border radius */
            background: var(--nav-bg-tertiary); /* Input background */
            color: var(--nav-text-primary);
            border: 1px solid var(--nav-border-primary);
            font-size: 13px;
            min-width: 120px; /* Ensure dropdowns have a minimum width */
            max-width: 180px; /* Max width for readability */
        }

        /* Styles for compact buttons in Quick Actions */
        .header-quick-actions-compact .btn-compact {
            padding: 8px 12px; /* Smaller padding for compact buttons */
            font-size: 13px;
            border-radius: 8px; /* Match filter dropdowns */
            gap: 6px; /* Smaller gap between icon and text */
            min-width: unset; /* Allow buttons to size based on content */
            width: auto; /* Ensure width adjusts to content */
        }

        /* Ensure buttons don't take 100% width unless forced by wrap */
        .header-quick-actions-compact .btn {
            width: auto; /* Override previous 100% width for quick actions buttons */
            margin-bottom: 0; /* Remove bottom margin here */
        }

        /* --- Media Queries for responsiveness --- */

        @media (max-width: 992px) {
            .header-controls-expanded {
                flex-direction: column; /* Stack the entire control section vertically */
                align-items: flex-start; /* Align contents to the start */
                padding: 15px 20px; /* Adjust padding for smaller screens */
                gap: 15px; /* Space between stacked compact sections */
            }

            .header-filters-compact,
            .header-quick-actions-compact {
                width: 100%; /* Take full width when stacked */
                justify-content: flex-start; /* Align content to the start */
                flex-direction: column; /* Stack items within these sections */
                gap: 10px; /* Space between stacked items */
                align-items: flex-start; /* Align labels/inputs to start */
            }

            .header-filters-compact > label,
            .header-quick-actions-compact > span {
                width: 100%; /* Ensure main labels span full width */
                text-align: left; /* Align them left */
                margin-bottom: 5px; /* Add some space below labels */
            }

            .header-filters-compact .form-group-inline,
            .header-quick-actions-compact .btn-compact {
                width: 100%; /* Force filter dropdowns and buttons to take full width */
                justify-content: flex-start; /* Align content left */
            }
            
            .header-filters-compact select {
                width: 100%; /* Dropdowns take full width */
                min-width: unset; /* Remove min-width constraint */
            }
        }

        @media (max-width: 768px) {
            /* Adjustments for even smaller screens */
            .header-controls-expanded {
                padding: 10px 15px;
                gap: 10px;
            }
            .header-filters-compact > label,
            .header-quick-actions-compact > span {
                font-size: 14px;
            }
            .header-filters-compact select,
            .header-quick-actions-compact .btn-compact {
                padding: 6px 10px;
                font-size: 12px;
            }
        }

        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--nav-accent-success);
            border-radius: 50%;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }

        /* Dashboard Layout */
        .dashboard {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin: 30px 40px;
            width: calc(100% - 80px);
        }

        /* Main Content */
        .main-content {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            width: 100%;
            transition: background 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
            box-sizing: border-box; 
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        

        .content-title {
            font-size: 28px; 
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }


        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }


        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 20px;
            width: 100%;
        }

        .tools-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .tool-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 25px;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow); 
        }

        .tools-list .tool-card {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            padding: 15px 20px;
        }

        .tools-list .tool-header {
            width: 100%;
            flex-direction: row;
            align-items: center;
            margin-bottom: 10px;
        }

        .tool-header > div:first-child {
            flex-grow: 1;
            flex-shrink: 1;
            min-width: 0;
        }
        .tools-list .tool-title {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .tools-list .tool-url {
            font-size: 11px;
        }

        .tools-list .tool-actions {
            margin-left: auto;
            flex-shrink: 0;
        }

        .tools-list .tool-tags {
            width: 100%;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            margin-top: 10px;
        }

        .tools-list .tool-tags .threat-level {
            margin-left: auto;
            float: none;
        }

        .tool-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .tool-card:hover {
            transform: translateY(-7px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .tool-card:hover::before {
            opacity: 1;
        }

        .tool-card.starred {
            border-color: var(--secondary);
        }

        .tool-card.pinned {
            border-color: var(--accent);
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.05), transparent);
        }

        .tool-card.selected {
            border-color: var(--warning);
            background: linear-gradient(135deg, rgba(255, 170, 0, 0.05), transparent);
        }
        /* Style for shared highlight */
        .tool-card.shared-highlight {
            border-color: var(--primary); /* Highlight with primary color */
            background: linear-gradient(135deg, rgba(0, 123, 255, 0.08), transparent);
            box-shadow: 0 0 15px rgba(0, 123, 255, 0.4);
        }


        .tool-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start; /* Align items to the top */
            margin-bottom: 15px;
            width: 100%; /* Ensure it takes full width of the card */
            flex-wrap: wrap; /* Allow header content to wrap if needed */
            gap: 10px; /* Space between the title/URL part and actions */
        }

        .tool-title {
            font-size: 1.15rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap; /* NEW: Allow elements within the title (checkbox, favicon, text) to wrap */
            min-width: 0; /* Ensures the title itself can shrink if necessary */
            word-break: break-word; /* NEW: Ensure long words break */
        }

        .tool-favicon {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .tool-url {
            font-size: 0.8rem; /* Slightly smaller URL */
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
            word-break: break-all;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .external-link-icon {
            color: var(--primary);
            font-size: 10px;
            opacity: 0.7;
        }

        .tool-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 6px; /* Smaller padding for action buttons */
            border-radius: 6px;
            transition: all 0.3s ease;
            font-size: 0.9rem; /* Slightly smaller icon size */
        }

        .action-btn:hover {
            background: var(--bg-tertiary);
            color: var(--primary); /* Hover color for actions */
            transform: scale(1.15); /* Slightly more prominent icon scaling */
        }

        .action-btn.starred {
            color: var(--secondary);
        }

        .action-btn.pinned {
            color: var(--accent);
        }


        /* Bulk Actions */
        .bulk-actions {
            display: none;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            align-items: center;
            gap: 15px;
            box-shadow: var(--shadow); /* Add shadow to bulk actions */
        }

        .bulk-actions.active {
            display: flex;
        }

        .bulk-checkbox {
            margin-right: 10px;
        }

        .threat-high {
            background: rgba(255, 51, 102, 0.2);
            color: var(--danger);
        }

        /* Analytics Dashboard */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .analytics-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 25px; /* More padding */
            text-align: center;
            transition: background 0.3s ease, border-color 0.3s ease;
            box-shadow: var(--shadow); /* Add shadow */
        }

        .analytics-value {
            font-size: 3rem; /* Larger font size */
            font-weight: 700;
            margin-bottom: 10px;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-family: 'JetBrains Mono', monospace;
            letter-spacing: -1px; /* Tighter spacing for numbers */
        }

        .analytics-section {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: var(--shadow); /* Add shadow */
        }

        .analytics-section h4 {
            color: var(--primary);
            margin-bottom: 15px;
        }

        .analytics-list {
            list-style: none;
            padding: 0;
        }

        .analytics-list li {
            padding: 10px 0;
            border-bottom: 1px solid var(--border-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--text-secondary);
        }

        .analytics-list li:last-child {
            border-bottom: none;
        }

        .analytics-list li span:first-child {
            color: var(--text-primary);
            font-weight: 500;
        }

        .analytics-list li span:last-child {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
        }


        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        @media (max-width: 1200px) {
            .dashboard {
                grid-template-columns: 1fr;
                margin: 20px 20px;
                width: calc(100% - 40px);
                gap: 20px; 
            }

            .header-content, .stats-bar {
                padding: 15px 20px;
            }
            .main-nav-tabs { 
                padding: 8px 10px;
                gap: 5px;
            }
            .nav-tab {
                padding: 12px 14px;
                font-size: 0.85rem;
            }
            .search-container {
                min-width: 250px;
            }

            .main-content {
                padding: 20px;
            }
            /* ADD THIS FOR THE NEW HEADER SECTION */
            .header-controls-expanded {
                padding: 15px 20px;
                gap: 15px;
            }
            .header-filter-section, .header-quick-actions {
                min-width: 200px; /* Adjust min-width if needed for smaller screens */
                padding: 10px 15px;
            }
        }

        @media (max-width: 992px) {
            .header-content {
                flex-direction: column;
                align-items: center;
                padding: 15px;
                gap: 15px;
            }
            .logo-and-title-container {
                justify-content: center;
                width: 100%; 
                margin-right: 0;
            }
            .controls {
                width: 100%;
                justify-content: center;
                margin-left: 0;
                order: 1;
            }
            .search-container {
                min-width: auto;
                width: 100%;
                max-width: 450px;
                flex-direction: row;
                padding: 8px;
            }
            .search-input {
                padding: 12px 40px 12px 15px;
                margin-bottom: 0;
            }
            #searchScopeSelect {
                margin-left: 10px;
                margin-top: 0; 
                width: auto;
            }

            .tools-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
                gap: 15px;
            }
            .tool-card {
                padding: 20px;
            }
            .tool-title {
                font-size: 1.05rem; 
            }
            .tool-url {
                font-size: 0.75rem; 
            }

            .pre-templates-container {
                grid-template-columns: 1fr; 
                gap: 20px;
            }
            .pre-templates-sidebar {
                position: static;
                margin-bottom: 0;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 0; 
            }
            .dashboard {
                margin: 15px 10px;
                width: calc(100% - 20px);
                gap: 15px;
            }

            .header-content {
                flex-direction: row; 
                justify-content: space-between;
                align-items: center;
                padding: 12px 15px;
                gap: 10px; 
            }
            .logo-and-title-container {
                justify-content: flex-start; 
                width: auto; 
                flex-grow: 1; 
            }
            .header-text-group {
                display: none;
            }
            .controls {
                display: none; /* Hide desktop controls */
                order: unset; /* Reset order */
            }
            .mobile-menu-toggle {
                display: block; /* Show mobile menu toggle */
                order: 2; /* Ensure it's on the right */
            }
            .header-logo {
                height: 50px; /* Smaller logo */
            }

            .main-nav-tabs {
                padding: 4px; /* Even tighter padding for main nav */
                border-radius: 10px;
                margin: 0 10px; /* Match dashboard padding */
                flex-wrap: wrap; /* Allow tabs to wrap */
                justify-content: center; /* Center tabs when wrapped */
            }
            .nav-tab {
                padding: 8px 10px;
                font-size: 0.75rem;
                gap: 5px;
                flex-direction: column; /* Stack icon and text */
                text-align: center;
                min-width: 65px; /* Minimum width for tap target */
            }
            .nav-tab i {
                font-size: 0.9rem;
                margin-bottom: 2px;
            }
            .sub-nav-tabs {
                margin: 10px 0; /* Adjust margin for sub-nav tabs */
                padding: 3px;
                border-radius: 8px;
            }
            .sub-nav-tab {
                padding: 6px 10px;
                font-size: 0.75rem;
                min-height: 32px;
            }

            .main-content {
                padding: 15px; /* Consistent padding */
            }
            .content-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            .content-title {
                font-size: 24px;
                width: 100%; 
                text-align: center; /* Center align title */
            }
            .content-header .controls {
                display: flex; /* Re-show controls within content-header, but stack them */
                flex-direction: column;
                align-items: center;
                width: 100%;
                gap: 10px;
            }
            .content-header .btn {
                width: 100%; /* Make buttons full width */
                justify-content: center;
            }

            .tools-grid, .tools-list {
                grid-template-columns: 1fr; /* Single column on mobile */
                gap: 15px;
            }
            .tools-list .tool-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px; /* Gap between title/url and actions */
            }
            .tools-list .tool-actions {
                margin-left: 0;
                width: 100%;
                justify-content: flex-start; /* Align action buttons to left */
                flex-wrap: wrap; /* Allow action buttons to wrap */
                gap: 5px;
            }
            .tool-card {
                padding: 15px; /* Reduce card padding */
            }
            .tool-title {
                font-size: 15px;
            }
            .tool-url {
                font-size: 10px;
            }

            .bulk-actions {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
                padding: 10px;
            }
            .bulk-actions .btn {
                width: 100%;
                justify-content: center;
            }

            .analytics-grid {
                grid-template-columns: 1fr; /* Stack analytics cards */
                gap: 15px;
            }
            .analytics-card {
                padding: 20px;
            }
            .analytics-value {
                font-size: 2.5rem; /* Smaller numbers */
            }
            .analytics-list li {
                font-size: 13px;
                padding: 8px 0;
            }

            .threat-item {
                padding: 15px;
                margin-bottom: 10px;
            }
            .threat-header h4 {
                font-size: 1.1em;
            }
            .threat-level {
                font-size: 0.7em;
                padding: 3px 8px;
            }

            .modal-content {
                padding: 25px; /* Reduce internal padding for modals */
                border-radius: 12px;
            }
            .form-group label {
                font-size: 0.9em;
                margin-bottom: 8px;
            }
            .form-group input,
            .form-group select,
            .form-group textarea {
                padding: 10px; /* Smaller input fields */
                font-size: 13px;
                border-radius: 8px;
            }
            .btn {
                padding: 10px 15px;
                font-size: 13px;
                border-radius: 10px;
            }
            .btn2 {
                padding: 10px 15px;
                font-size: 13px;
                border-radius: 10px;
            }

            .toast {
                max-width: calc(100% - 40px); /* Adjusted for padding */
                margin: 0 auto; /* Center toasts */
                text-align: center;
                right: auto; /* Remove right fixed position */
                left: 50%;
                transform: translateX(-50%);
            }

            /* Handbook & Notes Mobile adjustments */
            .handbook-container {
                grid-template-columns: 1fr; /* Sidebar stacks */
                gap: 0; /* Remove gap when stacked */
                margin: 0; /* Remove margin from container */
                width: 100%; 
            }
            .handbook-sidebar {
                position: fixed; /* Make sidebar fixed */
                left: -320px; /* Hide off-screen */
                top: 0;
                bottom: 0;
                width: 300px; /* Fixed width for mobile sidebar */
                z-index: 1000;
                border-radius: 0; /* No rounded corners on mobile sidebar */
                transition: left 0.3s ease;
                overflow-y: auto; /* Allow scrolling */
                background: var(--nav-bg-card); /* Use nav background for consistency */
                border-right: 1px solid var(--nav-border-primary); /* Add border to the right */
                box-shadow: 5px 0 15px rgba(0,0,0,0.3); /* Add shadow for open effect */
            }
            .handbook-sidebar.mobile-open {
                left: 0; /* Slide in */
            }
            .handbook-mobile-toggle {
                display: flex; /* Show mobile toggle */
                position: fixed;
                bottom: 20px;
                right: 20px;
                z-index: 1001; /* Ensure it's above content */
                width: 50px;
                height: 50px;
                font-size: 24px;
                background: var(--primary);
                color: white;
                border-radius: 50%;
                justify-content: center;
                align-items: center;
                box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            }
            /* Prevent body scroll when overlay active */
            body.handbook-overlay-active {
                overflow: hidden;
            }
            .handbook-content-container {
                padding: 15px; /* Adjust padding for mobile content */
                margin-top: 0; /* Remove top margin */
                width: 100%; 
            }
            .notes-header {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }
            .notes-search-container {
                margin-left: 0;
                width: 100%;
                order: 1; /* Order search first */
            }
            .new-note-btn {
                width: 100%;
                justify-content: center;
                order: 3; /* Order button last */
            }
            #noteSortFilter {
                width: 100%;
                order: 2; /* Order sort filter second */
            }
            .notes-grid {
                grid-template-columns: 1fr;
            }
            .note-editor-actions {
                flex-direction: column;
                gap: 10px;
            }
            .formatting-toolbar {
                padding: 8px;
                flex-wrap: wrap; /* Allow toolbar buttons to wrap */
                justify-content: center;
                gap: 3px;
            }
            .formatting-btn {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            .dashboard {
                margin: 10px 5px; /* Even tighter margins for very small screens */
                width: calc(100% - 10px);
                gap: 10px;
            }
            .header-content {
                padding: 8px 10px;
            }
            .header-logo {
                height: 40px; /* Smallest logo size */
            }
            .main-nav-tabs {
                margin: 0 5px;
                padding: 3px;
            }
            .nav-tab {
                padding: 6px 8px;
                font-size: 0.65rem;
                min-width: 60px;
            }
            .sub-nav-tabs {
                margin: 8px 0;
                padding: 2px;
            }
            .sub-nav-tab {
                padding: 4px 8px;
                font-size: 0.6rem;
                min-height: 25px;
            }
            .main-content {
                padding: 10px;
            }
            .content-title {
                font-size: 20px;
            }
            .tool-card {
                padding: 10px;
            }
            .tool-title {
                font-size: 14px;
            }
            .tool-url {
                font-size: 9px;
            }
            .tag {
                padding: 3px 8px;
                font-size: 0.7rem;
            }
            .modal-content {
                padding: 20px;
            }
            .form-group input, .form-group select, .form-group textarea {
                padding: 8px;
                font-size: 12px;
            }
            .btn, .btn2 {
                padding: 8px 12px;
                font-size: 12px;
            }
            .notes-empty-state, .empty-state {
                padding: 30px 10px;
            }
            .notes-empty-state h3, .empty-state h3 {
                font-size: 1.2em;
            }
            .notes-empty-state p, .empty-state p {
                font-size: 0.85em;
            }
            .notes-empty-state i, .empty-state i {
                font-size: 48px;
            }
            .theme-toggle, .handbook-mobile-toggle {
                width: 45px;
                height: 45px;
                font-size: 20px;
            }
            #desktopRecommendationModal .modal-content {
                padding: 20px;
            }
            #desktopRecommendationModal h3 {
                font-size: 18px;
            }
            #desktopRecommendationModal p {
                font-size: 13px;
            }
            /* Dork assistant adjustments */
            .dork-subtab-content > div { /* Target the flex container */
                flex-direction: column; /* Stack columns */
            }
            .dork-subtab-content > div > div { /* Target the flex children (builder and preview) */
                width: 100%;
                max-width: none; /* Remove max-width constraint */
            }
            .pre-templates-sidebar .category-item {
                flex-direction: row; /* Keep items in a row */
                text-align: left;
                padding: 8px 10px;
                font-size: 0.8em;
            }
            .pre-templates-sidebar .category-item i {
                font-size: 1em;
                margin-right: 5px;
            }
            .pre-templates-sidebar .category-item span {
                flex-grow: 1;
            }
            .pre-templates-sidebar .category-item .template-count {
                font-size: 0.7em;
                padding: 2px 6px;
            }
            .dork-operator-btn {
                padding: 6px 10px;
                font-size: 12px;
            }
            #savedQueriesSearch, #preTemplateSearchInput {
                max-width: 100%; /* Allow search inputs to fill width */
                margin-right: 0 !important; /* Remove specific margin */
                margin-bottom: 10px; /* Add some space below */
            }
            .content-header .controls button { /* Target buttons in content header when stacked */
                margin-right: 0 !important;
                width: 100%;
            }

            /* Investigation Wall adjustments */
            .wall-header {
                padding: 1.5rem 1rem;
            }
            .section-title {
                font-size: clamp(1.8rem, 8vw, 3rem); /* Adjust font size range for smaller screens */
                margin-bottom: 0.8rem;
            }
            .section-subtitle {
                font-size: clamp(0.9rem, 3vw, 1.1rem);
                margin-top: 1rem;
            }
            .evidence-container {
                padding: 0 1rem;
            }
            .evidence-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            .evidence-card {
                padding: 1.2rem;
                border-radius: 12px;
            }
            .card-icon {
                width: 40px;
                height: 40px;
                padding: 10px;
                margin-right: 0.8rem;
            }
            .card-title {
                font-size: 1rem;
            }
            .card-content {
                font-size: 0.9rem;
            }
            .highlight {
                font-size: 0.8rem;
                padding: 1px 6px;
            }

        }


        /* Modal and Form Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            backdrop-filter: blur(10px);
            overflow-y: auto;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
            padding: 15px; /* Add some padding to the modal container itself for small screens */
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 40px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid var(--border-light);
            box-shadow: var(--shadow-lg);
            transition: background 0.3s ease, border-color 0.3s ease;
            position: relative; /* ADD THIS LINE if it's not already there */
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px; /* More space below label */
            font-weight: 600; /* Bolder labels */
            color: var(--text-primary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 14px; /* Larger input fields */
            border: 1px solid var(--border);
            border-radius: 10px; /* Match button rounding */
            background: var(--bg-tertiary); /* Lighter background for inputs */
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.3s ease;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.08); /* Subtle inner shadow */
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: var(--glow), inset 0 1px 4px rgba(0,0,0,0.1);
        }
        .form-group.metadata-entry {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px; /* Smaller margin for repeated entries */
        }

        .form-group.metadata-entry input {
            flex: 1; /* Key and value inputs take equal space */
        }

        .form-group.metadata-entry .remove-metadata-btn {
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 10px;
            cursor: pointer;
            font-size: 0.8em;
            transition: background 0.2s ease;
        }

        .form-group.metadata-entry .remove-metadata-btn:hover {
            background: var(--primary-dark);
        }

        .add-metadata-btn {
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 15px;
            cursor: pointer;
            transition: background 0.2s ease;
            margin-top: 5px;
        }

        .add-metadata-btn:hover {
            background: var(--primary-dark);
        }


        /* Toast Notifications Container */
        #toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1002; /* Ensure it's above individual toasts */
            display: flex;
            flex-direction: column;
            gap: 10px; /* Space between toasts */
            align-items: flex-end; /* Align toasts to the right */
        }

        /* Existing .toast styles remain the same, but remove fixed positioning, right, and top */
        .toast {
            /* position: fixed;  REMOVE THIS LINE */
            /* top: 20px;       REMOVE THIS LINE */
            /* right: 20px;     REMOVE THIS LINE */
            background: var(--success);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            z-index: 1001;
            animation: slideInRight 0.3s ease;
            box-shadow: var(--shadow);
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.3s ease;
            /* NEW: Adjust width for better readability on smaller screens, keeping desktop reasonable */
            max-width: 350px;
            width: 100%; /* Take full width of max-width */
            box-sizing: border-box; /* Include padding/border in width calculation */
            text-align: left; /* Default text alignment */
        }

        .toast.show {
            opacity: 1;
            transform: translateX(0);
        }

        .toast.error {
            background: var(--danger);
        }

        .toast.warning {
            background: var(--warning);
        }
        .toast.info { /* For read-only banner */
            background: var(--primary-dark);
        }

        .toast-warning {
            background: var(--danger);
        }

        .toast-info { /* For read-only banner */
            background: var(--tab-color-yellow);
        }

        .toast-error {
            background: var(--warning);
        }

        @keyframes fadeIn { 
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px; /* More vertical padding */
            color: var(--text-secondary);
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 1px dashed var(--border-light); /* Dashed border for a softer look */
            margin-top: 20px;
            box-shadow: var(--shadow); /* Add shadow */
        }

        .empty-state i {
            font-size: 72px; /* Larger icon */
            margin-bottom: 20px;
            opacity: 0.2; /* Lighter opacity */
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tag {
            display: inline-block;
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            padding: 4px 10px; /* More padding for tags */
            border-radius: 16px; /* More rounded */
            font-size: 0.75rem; /* Slightly smaller font */
            margin-right: 6px;
            margin-bottom: 4px;
            font-weight: 500;
        }

        .threat-item {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: background 0.3s ease, border-color 0.3s ease;
            box-shadow: var(--shadow); /* Add shadow */
        }

        .threat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .threat-tags {
            margin-top: 10px;
        }

        .threat-level {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
            text-transform: uppercase;
        }
        .threat-high {
            background: var(--danger);
            color: white;
        }
        .threat-medium {
            background: var(--warning);
            color: black;
        }
        .threat-low {
            background: var(--success);
            color: white;
        }

        .scan-progress {
            background: var(--bg-tertiary);
            border-radius: 8px;
            height: 8px;
            margin: 15px 0;
            overflow: hidden;
        }

        .scan-progress-bar {
            height: 100%;
            background: var(--gradient-primary);
            width: 0%;
            transition: width 0.3s ease;
        }

        .scan-result {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }

        .scan-result:last-child {
            border-bottom: none;
        }

        .scan-result i {
            width: 20px;
        }

        /* Custom Tabs Tool Assignment */
        .custom-tab-assignment {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--border-light);
        }

        .custom-tab-assignment h4 {
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .custom-tab-checkboxes {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .custom-tab-checkbox {
            display: flex;
            align-items: center;
            gap: 5px;
            background: var(--bg-tertiary);
            padding: 8px 12px;
            border-radius: 8px; /* Slightly softer */
            font-size: 0.9em;
            cursor: pointer;
            border: 1px solid var(--border-light); /* More prominent default border */
            transition: all 0.2s ease;
        }

        .custom-tab-checkbox input[type="checkbox"] {
            margin: 0;
        }

        .custom-tab-checkbox.checked {
            border-color: var(--primary);
            background: rgba(0, 123, 255, 0.15); /* Match new primary color */
            box-shadow: 0 2px 5px rgba(0, 123, 255, 0.2);
        }

        /* Style for Icon picker */
        .icon-picker-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            gap: 5px;
            max-height: 150px;
            overflow-y: auto;
            border: 1px solid var(--border);
            padding: 10px;
            border-radius: 8px;
            background: var(--bg-secondary);
        }

        .icon-picker-item {
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            border-radius: 6px; /* Slightly softer */
            cursor: pointer;
            border: 1px solid var(--border-light); /* Visible border */
            transition: all 0.2s ease;
            color: var(--text-secondary);
        }

        .icon-picker-item:hover {
            background: var(--bg-tertiary);
            border-color: var(--primary);
            color: var(--primary);
        }

        .icon-picker-item.selected {
            background: var(--primary); /* Use primary color */
            color: white;
            border-color: var(--primary);
            box-shadow: var(--glow);
        }

        /* Style for Color picker */
        .color-picker-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .color-picker-item {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s ease;
        }

        .color-picker-item.selected {
            border-color: var(--text-primary); /* Border for selected color */
            box-shadow: 0 0 0 3px var(--primary-dark); /* Thicker, slightly darker glow */
        }

        /*---- Investigation Wall -------*/
        .investigation-wall {
            height: 100%;
            width: 100%;
            position: relative;
            background: 
                linear-gradient(135deg, var(--nav-bg-primary) 0%, var(--nav-bg-secondary) 100%);
            overflow: hidden;
            padding: 2rem 0;
        }

        /* Animated grid background */
        .wall-texture {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(var(--nav-grid-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--nav-grid-color) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridMove 20s linear infinite;
            opacity: 0.6;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        /* Floating particles */
        .floating-particles {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            background: var(--nav-accent-primary);
            border-radius: 50%;
            opacity: 0;
            animation: particleFloat 15s linear infinite;
        }

        @keyframes particleFloat {
            0% { 
                opacity: 0; 
                transform: translateY(100vh) scale(0);
            }
            10% { 
                opacity: 0.6; 
                transform: translateY(90vh) scale(1);
            }
            90% { 
                opacity: 0.6; 
                transform: translateY(-10vh) scale(1);
            }
            100% { 
                opacity: 0; 
                transform: translateY(-20vh) scale(0);
            }
        }

        /* Enhanced header section */
        .wall-header {
            position: relative;
            text-align: center;
            padding: 3rem 2rem;
            margin-bottom: 2rem;
            z-index: 10;
        }

        .wall-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                var(--nav-accent-primary), 
                var(--nav-accent-secondary),
                var(--nav-accent-success));
            opacity: 0.05;
            border-radius: 0 0 50px 50px;
        }

        .section-title {
            font-size: clamp(2rem, 6vw, 4rem);
            font-weight: 900;
            background: linear-gradient(135deg, 
                var(--nav-accent-primary), 
                var(--nav-accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            letter-spacing: -0.02em;
            line-height: 1.1;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, 
                var(--nav-accent-primary), 
                var(--nav-accent-secondary));
            border-radius: 2px;
            animation: titleGlow 2s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            0% { box-shadow: 0 0 10px var(--nav-glow-primary); }
            100% { box-shadow: 0 0 30px var(--nav-glow-secondary); }
        }

        .section-subtitle {
            font-size: clamp(1rem, 2.5vw, 1.25rem);
            color: var(--nav-text-secondary);
            font-weight: 500;
            margin-top: 1.5rem;
            opacity: 0.9;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--nav-bg-card);
            border: 1px solid var(--nav-border-primary);
            border-radius: 50px;
            padding: 0.5rem 1rem;
            margin-top: 1rem;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--nav-accent-success);
            backdrop-filter: blur(10px);
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            background: var(--nav-accent-success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
        }

        /* Evidence grid */
        .evidence-container {
            position: relative;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            z-index: 5;
        }

        .evidence-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            position: relative;
        }

        .evidence-card {
            background: var(--nav-bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--nav-border-primary);
            border-radius: 20px;
            padding: 2rem;
            position: relative;
            transform: perspective(1000px) rotateX(0deg) rotateY(0deg);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 10px 25px var(--nav-shadow-light),
                0 20px 48px var(--nav-shadow-medium);
            overflow: hidden;
        }

        .evidence-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, 
                var(--nav-accent-primary), 
                var(--nav-accent-secondary),
                var(--nav-accent-success));
            border-radius: 20px 20px 0 0;
        }

        .evidence-card::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                transparent, 
                rgba(255, 255, 255, 0.03), 
                transparent);
            transform: rotate(45deg);
            transition: all 0.5s ease;
            opacity: 0;
        }

        .evidence-card:hover {
            transform: perspective(1000px) rotateX(2deg) rotateY(2deg) translateY(-10px);
            box-shadow: 
                0 20px 40px var(--nav-shadow-medium),
                0 30px 60px var(--nav-shadow-heavy),
                0 0 30px var(--nav-glow-primary);
            border-color: var(--nav-accent-primary);
        }

        .evidence-card:hover::after {
            opacity: 1;
            animation: shimmer 1.5s ease-in-out;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            position: relative;
        }

        .card-icon {
            width: 48px;
            height: 48px;
            margin-right: 1rem;
            padding: 12px;
            background: linear-gradient(135deg, 
                var(--nav-accent-primary), 
                var(--nav-accent-secondary));
            border-radius: 12px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px var(--nav-glow-primary);
            transition: all 0.3s ease;
        }

        .evidence-card:hover .card-icon {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 8px 24px var(--nav-glow-secondary);
        }

        .card-title {
            color: var(--nav-text-primary);
            font-weight: 700;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .card-content {
            color: var(--nav-text-secondary);
            line-height: 1.7;
            font-size: 0.95rem;
            position: relative;
        }

        .highlight {
            background: linear-gradient(135deg, 
                var(--nav-accent-primary), 
                var(--nav-accent-secondary));
            color: white;
            padding: 2px 8px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.9rem;
            box-shadow: 0 2px 8px var(--nav-glow-primary);
            transition: all 0.3s ease;
        }

        .highlight:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px var(--nav-glow-secondary);
        }

        /* Connecting lines animation */
        .connecting-lines {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1;
        }

        .connection-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, 
                transparent, 
                var(--nav-accent-primary), 
                transparent);
            animation: lineFlow 4s ease-in-out infinite;
            opacity: 0.3;
        }

        @keyframes lineFlow {
            0%, 100% { opacity: 0.1; transform: scaleX(0); }
            50% { opacity: 0.6; transform: scaleX(1); }
        }

        /* Theme toggle */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--nav-bg-card);
            border: 1px solid var(--nav-border-primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px var(--nav-shadow-light);
            backdrop-filter: blur(10px);
            z-index: 1000;
        }

        .theme-toggle:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 8px 24px var(--nav-shadow-medium);
        }

        /* Responsive design */
        @media (max-width: 1024px) {
            .evidence-grid {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 1.5rem;
            }
            
            .wall-header {
                padding: 2rem 1rem;
            }
        }

        @media (max-width: 768px) {
            .investigation-wall {
                padding: 1rem 0;
            }
            
            .evidence-container {
                padding: 0 1rem;
            }
            
            .evidence-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .evidence-card {
                padding: 1.5rem;
                border-radius: 16px;
            }
            
            .wall-header {
                padding: 1.5rem 1rem;
                margin-bottom: 1rem;
            }
            
            .card-icon {
                width: 40px;
                height: 40px;
                padding: 10px;
            }
        }


        /* Special card categories */
        .evidence-card[data-category="search"] .card-icon {
            background: linear-gradient(135deg, #0ea5e9, #0284c7);
        }

        .evidence-card[data-category="social"] .card-icon {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }

        .evidence-card[data-category="documentation"] .card-icon {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .evidence-card[data-category="digital"] .card-icon {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .evidence-card[data-category="security"] .card-icon {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        .evidence-card[data-category="verification"] .card-icon {
            background: linear-gradient(135deg, #6366f1, #4338ca);
        }
        /*-------- End of Investigation Wall Styles --------*/


        /* Dork Assistant Styles */

        .dork-subtab-content {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            width: 100%;
            transition: background 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
            box-sizing: border-box;
        }
        .dork-subtab-content .content-title {
            margin-top: 0; /* Adjust for subtab content header */
        }
        .dork-template-card, .saved-query-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.2s ease;
            position: relative;
            box-shadow: var(--shadow);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .dork-template-card:hover, .saved-query-card:hover {
            border-color: var(--primary);
        }
        .dork-template-card .template-header, .saved-query-card .query-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text-primary);
        }
        .dork-template-card .template-query, .saved-query-card .query-string {
            background: var(--bg-tertiary);
            padding: 10px;
            border-radius: 6px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
            color: var(--text-secondary);
            word-break: break-all; /* Ensure long queries wrap */
        }
        .dork-template-card .template-description, .saved-query-card .query-description {
            font-size: 0.9em;
            color: var(--text-muted);
        }
        .dork-template-card .template-actions, .saved-query-card .query-actions {
            display: flex;
            gap: 5px;
            justify-content: flex-end;
            margin-top: 10px;
        }
        .dork-template-card .template-engine, .saved-query-card .query-engine {
            font-size: 0.8em;
            background: var(--primary);
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            text-transform: uppercase;
        }
        .saved-query-tags .tag {
            font-size: 0.7em;
            padding: 2px 6px;
        }
        .pre-templates-container {
            display: grid;
            grid-template-columns: 280px 1fr; /* Fixed sidebar width, flexible main content */
            gap: 20px;
            height: 100%; /* Take full height of parent */
        }

        .pre-templates-sidebar {
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            padding: 20px;
            height: fit-content; /* Adjusts to content, but stays sticky */
            position: sticky; /* Makes it scroll with the main content */
            top: 120px; /* Adjust based on your header height */
            transition: all 0.3s ease;
        }

        .pre-templates-sidebar .category-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 5px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }
        .pre-templates-sidebar .category-item:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }
        .pre-templates-sidebar .category-item.active {
            background: var(--gradient-primary);
            color: white;
            box-shadow: var(--shadow);
        }
        .pre-templates-sidebar .category-item i {
            font-size: 1.1em;
        }
        .pre-templates-sidebar .category-item span {
            flex-grow: 1;
        }
        .pre-templates-sidebar .category-item .template-count {
            font-size: 0.8em;
            background: rgba(0,0,0,0.2); /* Darker background for contrast on active */
            padding: 3px 8px;
            border-radius: 10px;
        }
        .pre-templates-sidebar .category-item.active .template-count {
            background: rgba(255,255,255,0.2); /* Lighter for contrast on active */
        }

        .pre-templates-main {
            background: var(--bg-card); /* Match other main content areas */
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            box-sizing: border-box;
        }

        /* Responsive adjustments for pre-templates */
        @media (max-width: 992px) {
            .pre-templates-container {
                grid-template-columns: 1fr; /* Stack on smaller screens */
            }
            .pre-templates-sidebar {
                position: static; /* Remove sticky behavior when stacked */
                margin-bottom: 20px;
            }
        }

        .form-group-input { /* Reusing your existing input styles, but explicitly for select elements */
            width: 100%;
            padding: 14px;
            border: 1px solid var(--border);
            border-radius: 10px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.3s ease;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.08);
        }

        .form-group-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: var(--glow), inset 0 1px 4px rgba(0,0,0,0.1);
        }

        .dork-operator-btn {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .dork-operator-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        .dork-operator-btn:active {
            transform: translateY(0);
        }

        /* Adjustments for responsive layout */
        @media (max-width: 992px) {
            #dork-assistantTab > div {
                flex-direction: column;
            }
            #dork-assistantTab > div > div {
                flex: none;
                width: 100%;
            }
        }



        /* OSINT Handbook & Notes Styles */
        /* General Handbook Styles */
        .handbook-container {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 30px;
            height: 100%;
            position: relative;
        }

        /* Handbook Sidebar */
        .handbook-sidebar {
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            padding: 20px;
            height: 100%;
            overflow-y: auto;
            transition: all 0.3s ease;
            position: sticky;
            top: 20px;
        }

        .handbook-search-container {
            position: relative;
            margin-bottom: 20px;
        }

        .handbook-search {
            width: 100%;
            padding: 12px 20px 12px 40px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .handbook-search:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: var(--glow);
        }

        .handbook-search-icon {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 14px;
        }

        .handbook-nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 6px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
            width: 100%;
        }

        .handbook-nav-item:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .handbook-nav-item.active {
            background: var(--gradient-primary);
            color: white;
            box-shadow: var(--shadow);
        }

        .handbook-category {
            margin-bottom: 10px;
            display: block;
        }

        .handbook-category-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            border-radius: 10px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
        }

        .handbook-category-header:hover {
            background: var(--bg-tertiary);
        }

        .handbook-category-header .category-toggle {
            margin-left: auto;
            transition: transform 0.3s ease;
        }

        .handbook-category-header .category-toggle.rotate {
            transform: rotate(180deg);
        }

        .handbook-subcategories {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            margin-left: 10px; /* Indent subcategories */
            /* Add this to explicitly make it a column layout if it implicitly became a row */
            display: flex;
            flex-direction: column;
            width: auto; /* Allow content to dictate width if not explicitly set elsewhere */
        }

        /* Handbook Content */
        .handbook-content-container {
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            padding: 30px;
            height: 100%;
            overflow-y: auto;
        }

        .handbook-content {
            max-width: 800px;
            /* Changed: Align to the left instead of centering */
            margin: 0; /* Remove auto margins to prevent centering */
            margin-left: 0; /* Explicitly align to the left */
            margin-right: auto; /* Allow auto margin on right for remaining space, keeping left fixed */
            line-height: 1.7;
        }

        .handbook-content h2 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--primary);
            border-bottom: 2px solid var(--border-light);
            padding-bottom: 10px;
        }

        .handbook-content h3 {
            font-size: 22px;
            font-weight: 600;
            margin: 25px 0 15px;
            color: var(--text-primary);
        }

        .handbook-content p {
            margin-bottom: 15px;
            color: var(--text-secondary);
        }

        .handbook-content ul, 
        .handbook-content ol {
            margin-bottom: 20px;
            margin-left: 25px;
            color: var(--text-secondary);
        }

        .handbook-content ul li, 
        .handbook-content ol li {
            margin-bottom: 8px;
        }

        .handbook-content strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        .code-block {
            position: relative;
            background: var(--bg-tertiary);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            line-height: 1.5;
            border-left: 4px solid var(--primary);
        }

        .code-block pre {
            margin: 0;
            padding-right: 40px; /* Space for copy button */
        }

        .code-block code {
            color: var(--text-primary);
            display: block;
            white-space: pre;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text-secondary);
        }

        .copy-btn:hover {
            background: var(--primary);
            color: white;
        }

        .tag-section {
            margin: 20px 0;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .handbook-content .tag {
            display: inline-block;
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }


        /* Mobile sidebar toggle (hidden by default) */
        .handbook-mobile-toggle {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px; /* Slightly larger for easier tap */
            height: 50px; /* Slightly larger for easier tap */
            border-radius: 50%;
            background: var(--primary);
            color: white;
            border: none;
            box-shadow: var(--shadow-lg);
            z-index: 1001; /* Ensure it's above other elements */
            cursor: pointer;
            display: flex; /* Always display as flex to properly center icon */
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        /* Add this new class at the top level of your CSS, not inside a media query */
        body.handbook-overlay-active {
            overflow: hidden; /* Prevent scrolling of content behind modal/sidebar */
        }

        .handbook-mobile-toggle:hover {
            transform: scale(1.05);
        }

        /* Notes Styles */
        .notes-container {
            height: 100%;
            position: relative;
        }

        .notes-list-view, .note-editor-view {
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            padding: 25px;
            height: 100%;
            overflow-y: auto;
        }

        .notes-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap; /* Allow items to wrap */
            gap: 15px; /* Add gap between items when wrapped */
        }

        .notes-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }

        .notes-search-container {
            position: relative;
            flex-grow: 1;
            max-width: 400px;
            margin-left: 20px;
        }

        .notes-search {
            width: 100%;
            padding: 12px 40px 12px 15px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .notes-search:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: var(--glow);
        }

        .notes-search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 14px;
        }

        .new-note-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px var(--primary-shadow-color);
        }

        .new-note-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px var(--primary-shadow-color-hover);
        }

        .notes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .note-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.2s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .note-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .note-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .note-card:hover::before {
            opacity: 1;
        }

        .note-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .note-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
            line-height: 1.3;
        }

        .note-actions {
            display: flex;
            gap: 8px;
            opacity: 0.2;
            transition: opacity 0.2s ease;
        }

        .note-card:hover .note-actions {
            opacity: 1;
        }

        /* NEW: Styling for pinned notes */
        .note-card.pinned {
            border-color: var(--accent);
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.05), transparent);
            order: -1; /* Pinned items appear first in flex/grid */
        }

        .note-action-btn.pinned {
            color: var(--accent); /* Color for active pin button */
        }

        .note-action-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 5px;
            border-radius: 5px;
            transition: all 0.2s ease;
        }

        .note-action-btn:hover {
            background: var(--bg-tertiary);
            color: var(--primary);
        }

        .note-action-btn.delete-note:hover {
            color: var(--danger);
        }

        .note-preview {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 15px;
            line-height: 1.5;
            max-height: 120px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 5;
            -webkit-box-orient: vertical;
        }

        .note-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: var(--text-muted);
        }

        .note-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .note-footer .tag {
            padding: 2px 8px;
            font-size: 11px;
        }

        .notes-empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 1px dashed var(--border-light);
            margin-top: 20px;
        }

        .notes-empty-state i {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.3;
        }

        /* Note Editor View */
        .note-editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .note-editor-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }

        .note-editor-actions {
            display: flex;
            gap: 10px;
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 15px;
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .back-btn:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .save-note-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 15px;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px var(--primary-shadow-color);
        }

        .save-note-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px var(--primary-shadow-color-hover);
        }

        .edit-note-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 15px;
            background: var(--bg-tertiary);
            color: var(--primary);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .edit-note-btn:hover {
            background: var(--primary);
            color: white;
        }

        .note-title-input {
            width: 100%;
            padding: 15px;
            border: 1px solid var(--border);
            border-radius: 10px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .note-title-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: var(--glow);
        }

        .note-title-input:read-only {
            border-color: transparent;
            background: transparent;
            padding-left: 0;
            padding-right: 0;
        }

        .formatting-toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 15px;
            padding: 10px 15px;
            background: var(--bg-tertiary);
            border-radius: 10px;
        }

        .formatting-btn {
            width: 34px;
            height: 34px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .formatting-btn:hover {
            background: var(--primary);
            color: white;
        }

        .formatting-btn.has-dropdown {
            width: auto;
            padding: 0 12px;
        }

        .note-content-editor {
            min-height: 300px;
            padding: 20px;
            border: 1px solid var(--border);
            border-radius: 10px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-size: 16px;
            line-height: 1.6;
            transition: all 0.3s ease;
            margin-bottom: 20px;
            overflow-y: auto;
        }

        .note-content-editor:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: var(--glow);
        }

        .note-content-editor[contenteditable="false"] {
            border-color: transparent;
            background: transparent;
            padding-left: 0;
            padding-right: 0;
        }

        .note-content-editor h1 {
            font-size: 24px;
            font-weight: 700;
            margin: 25px 0 15px;
            color: var(--text-primary);
        }

        .note-content-editor h2 {
            font-size: 20px;
            font-weight: 600;
            margin: 20px 0 15px;
            color: var(--text-primary);
        }

        .note-content-editor h3 {
            font-size: 18px;
            font-weight: 600;
            margin: 15px 0 10px;
            color: var(--text-primary);
        }

        .note-content-editor p {
            margin-bottom: 15px;
        }

        .note-content-editor ul, 
        .note-content-editor ol {
            margin-bottom: 15px;
            margin-left: 25px;
        }

        .note-content-editor li {
            margin-bottom: 5px;
        }

        .note-content-editor a {
            color: var(--primary);
            text-decoration: underline;
        }

        .note-tags-section {
            margin-top: 25px;
        }

        .note-tags-header {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .note-tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .note-tag {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border-radius: 20px;
            font-size: 14px;
        }

        .remove-tag-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .remove-tag-btn:hover {
            color: var(--danger);
        }

        .tag-input-container {
            display: flex;
            gap: 10px;
        }

        .note-tags-input {
            flex-grow: 1;
            padding: 10px 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .note-tags-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: var(--glow);
        }

        .add-tag-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px 15px;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .add-tag-btn:hover {
            background: var(--primary);
            color: white;
        }

        /* Responsive Styles */
        @media (max-width: 1024px) {
            .handbook-container {
                grid-template-columns: 280px 1fr;
                gap: 20px;
            }
            
            .handbook-content-container {
                padding: 20px;
            }
        }

        @media (max-width: 768px) {
            .handbook-container {
                grid-template-columns: 1fr;
            }
            
            .handbook-sidebar {
                position: fixed;
                left: -320px;
                top: 0;
                bottom: 0;
                width: 300px; /* Adjusted width for mobile sidebar */
                z-index: 1000;
                border-radius: 0;
                transition: left 0.3s ease;
            }
            
            .handbook-sidebar.mobile-open {
                left: 0;
                box-shadow: var(--shadow-lg); /* Add shadow to open sidebar */
            }
                    
            .handbook-mobile-toggle {
                display: flex;
                z-index: 1001;
            }
            
            .notes-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .handbook-content-container {
                padding: 15px;
            }
            
            .handbook-content h2 {
                font-size: 24px;
            }
            
            .handbook-content h3 {
                font-size: 20px;
            }
            
            .note-editor-actions {
                flex-direction: column;
                gap: 10px;
            }
            
            .formatting-toolbar {
                padding: 8px;
                gap: 3px;
            }
            
            .formatting-btn {
                width: 30px;
                height: 30px;
            }
        }
        /* Handbook Controls */
        .handbook-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: var(--bg-tertiary);
            border-radius: 10px;
            border: 1px solid var(--border-light);
        }

        .handbook-btn {
            padding: 8px 15px;
            font-size: 14px;
        }

        /* Search Enhancements */
        .handbook-search-container {
            position: relative;
        }

        .handbook-search {
            padding-right: 40px; /* Space for the clear button/icon */
        }

        .handbook-search-icon {
            transition: all 0.2s ease;
        }

        .handbook-search-icon:hover {
            color: var(--primary);
            transform: scale(1.1);
        }

        .handbook-no-results {
            padding: 15px;
            text-align: center;
            color: var(--text-secondary);
            background: var(--bg-tertiary);
            border-radius: 8px;
            margin-top: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .handbook-no-results i {
            font-size: 24px;
            opacity: 0.5;
        }

        /* Search highlights */
        .search-highlight {
            background-color: rgba(255, 170, 0, 0.3);
            border-radius: 3px;
            padding: 2px 0;
        }

        mark.search-highlight {
            background-color: rgba(255, 170, 0, 0.3);
            color: inherit;
        }

        .handbook-nav-item.search-highlight {
            background-color: rgba(0, 123, 255, 0.1);
            border-left: 3px solid var(--primary);
        }

        /* Section Editor */
        #section-editor-modal .modal-content {
            max-width: 800px;
        }

        #section-editor-content {
            min-height: 300px;
            max-height: 500px;
            overflow-y: auto;
        }

        /* Icon picker tweaks */
        .icon-picker-grid {
            margin-top: 10px;
            max-height: 180px;
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .handbook-controls {
                flex-wrap: wrap;
            }
            
            .handbook-btn {
                flex-grow: 1;
            }
        }

        /* Animation for new/edit controls */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .handbook-controls {
            animation: fadeIn 0.3s ease-out;
        }

        /* NEW: Desktop Recommendation Modal Specific Styling */
        #desktopRecommendationModal .modal-content {
            max-width: 550px; /* Make this modal slightly narrower */
            text-align: center;
            padding: 30px; /* Adjust padding as needed */
        }

        #desktopRecommendationModal h3 {
            font-size: 22px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        #desktopRecommendationModal p {
            font-size: 15px;
        }

        #desktopRecommendationModal .btn {
            margin-top: 10px;
            width: auto; /* Allow button to size itself */
            justify-content: center; /* Center content within the button */
        }

        /* Timeline Specific Styles */
        #timeline-events-display {
            margin-top: 20px;
            display: flex;
            flex-direction: column; /* Events stack vertically */
            gap: 15px; /* Space between events */
            position: relative; /* For the vertical line */
            padding-left: 30px; /* Space for the timeline line and markers */
            box-sizing: border-box;
        }

        #timeline-events-display::before {
            content: '';
            position: absolute;
            left: 15px; /* Position of the vertical line */
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border-light); /* Thin vertical line */
            z-index: 0;
        }

        .timeline-event-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 15px 20px;
            position: relative;
            box-shadow: var(--shadow);
            transition: all 0.2s ease;
            margin-left: 20px; /* Offset to make space for the marker */
        }

        .timeline-event-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .timeline-event-card::before {
            content: '';
            position: absolute;
            left: -35px; /* Position of the marker relative to the card */
            top: 20px;
            width: 15px;
            height: 15px;
            background: var(--primary); /* Default marker color */
            border-radius: 50%;
            border: 3px solid var(--bg-card); /* Border around the marker */
            z-index: 1;
            box-shadow: 0 0 0 2px var(--primary-shadow-color);
        }

        .timeline-event-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .timeline-event-title {
            font-size: 1.15rem;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
            flex-grow: 1;
        }

        .timeline-event-timestamp {
            font-size: 0.85rem;
            color: var(--text-muted);
            white-space: nowrap;
        }

        .timeline-event-notes {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .timeline-event-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 10px;
            border-top: 1px solid var(--border-light);
            padding-top: 10px;
        }

        .timeline-event-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .timeline-event-meta i {
            color: var(--primary);
        }

        /* Category/Confidence Specific Colors & Icons for Markers */
        .timeline-event-card[data-confidence="low"]::before { background: #6c757d; box-shadow: 0 0 0 2px rgba(108, 117, 125, 0.3); } /* Grey */
        .timeline-event-card[data-confidence="medium"]::before { background: #ffc107; box-shadow: 0 0 0 2px rgba(255, 193, 7, 0.3); } /* Yellow */
        .timeline-event-card[data-confidence="high"]::before { background: #28a745; box-shadow: 0 0 0 2px rgba(40, 167, 69, 0.3); } /* Green */
        .timeline-event-card[data-confidence="critical"]::before { background: #dc3545; box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.3); } /* Red */

        /* Optional: Category specific marker colors (override confidence if desired) */
        .timeline-event-card[data-category="phishing"]::before { background: #e74c3c; }
        .timeline-event-card[data-category="initial_access"]::before { background: #3498db; }
        .timeline-event-card[data-category="lateral_movement"]::before { background: #9b59b6; }
        .timeline-event-card[data-category="exfiltration"]::before { background: #f1c40f; }
        .timeline-event-card[data-category="malware_delivery"]::before { background: #e67e22; }
        .timeline-event-card[data-category="remediation"]::before { background: #2ecc71; }
        /* Add more category specific colors as needed */

        .timeline-event-actions {
            display: flex;
            gap: 5px;
        }

        .timeline-event-actions .action-btn {
            padding: 5px 8px; /* Adjust button size */
            font-size: 0.8rem;
        }
        /* Ensure custom vault buttons stay in one row */
        #customVaultButtonsRow {
            display: flex;
            flex-wrap: nowrap; /* CRITICAL: Prevent wrapping */
            justify-content: flex-end; /* Align to the right */
            align-items: center;
            gap: 10px; /* Space between buttons */
            width: 100%; /* Ensure it uses full available width */
            overflow-x: auto; /* Allow horizontal scrolling if buttons absolutely cannot fit (fallback) */
            padding-bottom: 5px; /* Add slight padding in case of scrollbar */
            box-sizing: border-box; /* Include padding in width */
            -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
        }

        /* Further reduce button size specifically within this row if needed for very small screens */
        @media (max-width: 480px) {
            #customVaultButtonsRow .btn {
                padding: 8px 10px; /* Even smaller padding */
                font-size: 11px; /* Even smaller font size */
                white-space: nowrap; /* Prevent button text from wrapping */
                flex-shrink: 0; /* Prevent buttons from shrinking too much (optional, can remove if you want them to compress) */
            }
        }


        /* --- New Close Modal Button Styles --- */
        .close-modal-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--bg-tertiary); /* Give it a distinct background */
            border: 1px solid var(--border); /* Add a subtle border */
            border-radius: 50%; /* Make it round */
            width: 32px; /* Fixed width */
            height: 32px; /* Fixed height */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px; /* Larger 'x' */
            color: var(--text-primary); /* Ensure contrast with primary text color */
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 10; /* Ensure it's above other content in the modal */
            box-shadow: var(--shadow-light); /* Subtle shadow */
        }

        .close-modal-btn:hover {
            background: var(--danger); /* Red background on hover for "close" action */
            color: white; /* White 'x' on hover */
            transform: scale(1.1); /* Slightly enlarge on hover */
            border-color: var(--danger);
            box-shadow: 0 4px 10px rgba(220, 53, 69, 0.3); /* More pronounced shadow */
        }

 
        /* Add this CSS rule to your existing <style> block */
            .mobile-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5); /* Semi-transparent black overlay */
            z-index: 999; /* Below the sidebar but above other content */
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none; /* Allows clicks to pass through by default */
        }

        .mobile-sidebar-menu.active + .mobile-menu-overlay {
            opacity: 1;
            pointer-events: auto; /* Enable clicks on the overlay when menu is active */
        }


 /* New: Styles for the Random Discovery section layouts */

/* Basic styling for the main section container */
.discovery-section {
    width: 100%;
    max-width: 1800px; /* Match header/footer max-width for consistency */
    margin: 30px auto; /* Centered with top/bottom margin */
    padding: 20px 40px; /* Match padding of main content/header */
    box-sizing: border-box; /* Ensure padding is included in width */
    background: var(--bg-card); /* Card background for this section */
    border: 1px solid var(--border);
    border-radius: 12px;
    box-shadow: var(--shadow);
    text-align: center; /* Center content within the section */
    display: flex; /* Make it a flex container to center its own content */
    flex-direction: column;
    align-items: center; /* Center horizontally */
    justify-content: center; /* Center vertically */
    gap: 20px; /* Space between header/content and button */
}

/* Styles for the inner random discovery container. This is #randomDiscovery */
/* It will now receive layout classes (e.g., .two-rows) */
.random-display {
    width: 100%; /* Take full width of parent section */
    display: flex;
    flex-direction: column; /* Default to column, overridden by layout classes */
    align-items: center;
    justify-content: center;
    gap: 20px; /* Space between header and content wrapper */
    background: none; /* No extra background */
    border: none; /* No extra border */
    box-shadow: none; /* No extra shadow */
    padding: 0;
    min-height: auto;
}

/* Header for the random discovery section */
.random-display .random-display-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    color: var(--text-primary);
    font-weight: 600;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--border-light);
    width: 100%; /* Ensure header spans full width for border */
    max-width: 600px; /* Constrain header width if desired */
    margin-bottom: 20px; /* Space below header */
}

.random-display .random-display-header .header-icon {
    font-size: 1.8em;
    color: var(--primary);
    text-shadow: 0 0 8px rgba(0, 123, 255, 0.3);
}

.random-display .random-display-header .header-text {
    font-size: 1.2em;
    margin: 0;
    font-family: 'Outfit', sans-serif;
    letter-spacing: -0.5px;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* Wrapper for the actual content cards. This is #randomItemDisplay */
.random-content-wrapper {
    width: 100%;
    /* Default is flex column, overridden by layout classes on its parent (#randomDiscovery) */
}

/* Base style for individual content cards */
.random-content-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 15px;
    box-shadow: var(--shadow-light);
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 10px;
    min-height: 150px; /* Ensure cards have a minimum height */
}

.random-content-card .card-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-bottom: 10px;
}

.random-content-card .card-header i {
    font-size: 1.5em;
    color: var(--primary);
}

.random-content-card .card-header img.tool-favicon {
    width: 24px;
    height: 24px;
    border-radius: 4px;
}

.random-content-card .card-title {
    font-size: 1.1em;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.random-content-card .card-description {
    font-size: 0.9em;
    color: var(--text-secondary);
    line-height: 1.4;
    flex-grow: 1; /* Allow description to take available space */
}

.random-content-card .card-link {
    margin-top: 10px;
    padding: 8px 15px;
    font-size: 0.85em;
    font-weight: 500;
    border-radius: 8px;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 5px;
}

/* Specific styling for different content types (for visual cues) */
.random-tool-card {
    border-left: 4px solid var(--primary);
}

.random-tip-card {
    border-left: 4px solid var(--accent);
}

.random-case-study-card {
    border-left: 4px solid #6c5ce7; /* Match case study tab color */
}

/* Placeholder card for when content is not available */
.random-content-card.placeholder {
    border: 1px dashed var(--border-light);
    color: var(--text-muted);
}
.random-content-card.placeholder i {
    color: var(--text-muted);
    opacity: 0.5;
}

/* Layout specific styles applied to .random-display (#randomDiscovery) */

/* Single centered item layout */
.random-display.single-centered .random-content-wrapper {
    max-width: 500px; /* Constrain width of the single item */
    margin: 0 auto;
    display: flex; /* Ensure it's a flex container for its single child */
    flex-direction: column;
    align-items: center;
}
.random-display.single-centered .random-content-wrapper .random-content-card {
    width: 100%; /* Ensure card takes full width within its wrapper */
}


/* Two columns layout (side-by-side) */
.random-display.two-columns .random-content-wrapper {
    display: grid;
    grid-template-columns: 1fr 1fr; /* Two equal columns */
    gap: 20px; /* Space between columns */
    max-width: 900px; /* Max width for two columns */
    margin: 0 auto; /* Center the grid */
}
.random-display.two-columns .random-content-wrapper .random-content-card {
    width: 100%; /* Fill grid cell */
}


/* --- FIXED: Two rows layout (one large card, two smaller stacked on the right) --- */
/* Target the random-content-wrapper (#randomItemDisplay) as the grid container when its parent (#randomDiscovery) has 'two-rows' class */
.random-display.two-rows .random-content-wrapper {
    display: grid;
    /* Define 2 columns: first is 1 fraction unit, second is 1 fraction unit */
    grid-template-columns: 1fr 1fr;
    /* Define 2 rows: both automatically sized to content */
    grid-template-rows: auto auto;
    /* Define named areas: 'card1' spans both rows of the first column */
    grid-template-areas: 
        "card1 card2"
        "card1 card3";
    gap: 20px; /* Space between grid items */
    max-width: 900px; /* Max width for this layout */
    margin: 0 auto; /* Center the grid within its wrapper */
    align-items: stretch; /* Stretch items to fill grid cells vertically */
}

/* Explicitly assign grid areas to the direct child cards based on their order */
.random-display.two-rows .random-content-wrapper > .random-content-card:nth-child(1) {
    grid-area: card1; /* The big card on the left */
    min-height: 320px; /* Ensure it's tall enough to contain the other two, adjust as needed */
}
.random-display.two-rows .random-content-wrapper > .random-content-card:nth-child(2) {
    grid-area: card2; /* Top right card */
}
.random-display.two-rows .random-content-wrapper > .random-content-card:nth-child(3) {
    grid-area: card3; /* Bottom right card */
}


/* Media queries for responsiveness for the random discovery section */
@media (max-width: 992px) {
    .discovery-section {
        padding: 15px 20px;
        margin: 20px auto;
    }

    /* On smaller screens, stack all layout types into a single column */
    .random-display.single-centered .random-content-wrapper,
    .random-display.two-columns .random-content-wrapper,
    .random-display.two-rows .random-content-wrapper {
        grid-template-columns: 1fr; /* Stack into a single column */
        grid-template-rows: auto; /* Remove explicit row sizing */
        grid-template-areas: none; /* Clear grid areas for stacking */
        max-width: 500px; /* Adjust max width for single column */
        display: flex; /* Change back to flex for simpler stacking */
        flex-direction: column;
        align-items: center; /* Center items in column */
    }
    /* Reset specific card height if it was set for spanning rows */
    .random-display .random-content-wrapper .random-content-card { /* Target all cards within dynamic area */
        min-height: 150px; /* Revert to base min-height */
    }
}

@media (max-width: 480px) {
    .discovery-section {
        padding: 10px 15px;
        margin: 15px auto;
    }

    .random-display .random-display-header {
        font-size: 0.9em;
        gap: 8px;
        margin-bottom: 10px;
    }

    .random-display .random-display-header .header-icon {
        font-size: 1.5em;
    }

    .random-display .random-display-header .header-text {
        font-size: 1.1em;
    }

    .random-content-card {
        padding: 10px;
        min-height: 120px;
    }

    .random-content-card .card-title {
        font-size: 1em;
    }

    .random-content-card .card-description {
        font-size: 0.85em;
    }

    .random-content-card .card-link {
        padding: 6px 12px;
        font-size: 0.8em;
    }
}

        .welcome-content-wrapper {
            background: var(--surface);
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 20px 25px -5px var(--shadow), 0 10px 10px -5px var(--shadow);
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .welcome-content-wrapper::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
        }

        .welcome-heading-title {
            font-size: 3.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
            margin-top: 2.5rem;
            text-shadow: 0 0 30px var(--glow);
            text-align: center;
        }

        .welcome-heading {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .welcome-paragraph-intro {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            text-align: center;
            line-height: 1.7;
        }

        .welcome-sub-heading {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 2rem 0 1.5rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .welcome-sub-heading::before {
            content: '';
            width: 4px;
            height: 20px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 2px;
        }

        .welcome-info-items {
            list-style: none;
            margin-bottom: 2rem;
        }

        .welcome-info-items li {
            background: var(--surface-light);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .welcome-info-items li::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .welcome-info-items li:hover {
            transform: translateX(8px);
            box-shadow: 0 10px 25px -5px var(--shadow);
        }

        .welcome-info-items li:hover::before {
            opacity: 1;
        }

        .welcome-icon-list {
            font-size: 1.2rem;
            margin-right: 1rem;
            width: 24px;
            text-align: center;
            vertical-align: middle;
        }

        .icon-private { color: var(--accent); }
        .icon-export { color: var(--warning); }
        .icon-default { color: var(--success); }
        .icon-share { color: var(--primary); }
        .icon-desktop { color: var(--secondary); }

        .welcome-info-items strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        .action-heading {
            margin-top: 3rem !important;
            color: var(--accent);
            text-align: center; /* Add this line */
            justify-content: center;
        }

        .welcome-action-buttons-container {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 2rem 0;
            flex-wrap: wrap;
        }
        
        .welcome-action-note-text {
            text-align: center;
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(239, 68, 68, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .welcome-action-note-text i {
            color: var(--danger);
            margin-right: 0.5rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .tab-content {
                padding: 1rem;
            }

            .content-title {
                font-size: 2rem;
            }

            .welcome-content-wrapper {
                padding: 1.5rem;
                border-radius: 15px;
            }

            .welcome-heading {
                font-size: 1.5rem;
            }

            .welcome-action-buttons-container {
                flex-direction: column;
                align-items: center;
            }

            .welcome-info-items li {
                padding: 1rem;
            }
        }

        /* Scroll animations */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }

        .animate-on-scroll.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .welcome-content-wrapper {
            background: var(--surface);
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 20px 25px -5px var(--shadow), 0 10px 10px -5px var(--shadow);
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .welcome-content-wrapper::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
        }

        .welcome-heading {
            font-size: 2rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .welcome-paragraph-intro {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            text-align: center;
            line-height: 1.7;
        }

        .welcome-sub-heading {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 2rem 0 1.5rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .welcome-sub-heading::before {
            content: '';
            width: 4px;
            height: 20px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 2px;
        }

        .welcome-info-items {
            list-style: none;
            margin-bottom: 2rem;
        }

        .welcome-info-items li {
            background: var(--surface-light);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .welcome-info-items li::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .welcome-info-items li:hover {
            transform: translateX(8px);
            box-shadow: 0 10px 25px -5px var(--shadow);
        }

        .welcome-info-items li:hover::before {
            opacity: 1;
        }

        .welcome-icon-list {
            font-size: 1.2rem;
            margin-right: 1rem;
            width: 24px;
            text-align: center;
            vertical-align: middle;
        }

        .icon-private { color: var(--accent); }
        .icon-export { color: var(--warning); }
        .icon-default { color: var(--success); }
        .icon-share { color: var(--primary); }
        .icon-desktop { color: var(--secondary); }

        .welcome-info-items strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        .action-heading {
            margin-top: 3rem !important;
            color: var(--accent);
        }

        .welcome-action-buttons-container {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 2rem 0;
            flex-wrap: wrap;
        }
        .welcome-action-note-text {
            text-align: center;
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(239, 68, 68, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .welcome-action-note-text i {
            color: var(--danger);
            margin-right: 0.5rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .tab-content {
                padding: 1rem;
            }

            .content-title-heading {
                font-size: 2rem;
            }

            .welcome-content-wrapper {
                padding: 1.5rem;
                border-radius: 15px;
            }

            .welcome-heading {
                font-size: 1.5rem;
            }

            .welcome-action-buttons-container {
                flex-direction: column;
                align-items: center;
            }

            .welcome-info-items li {
                padding: 1rem;
            }
        }

        /* Scroll animations */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }

        .animate-on-scroll.visible {
            opacity: 1;
            transform: translateY(0);
        }
/* ===================================== */
/* Case Studies Tab - General Styling */
/* ===================================== */

#case-studiesTab {
    padding: 20px;
}

#caseStudyParentTabs {
    display: flex;
    flex-wrap: wrap; /* Allow tabs to wrap on smaller screens */
    gap: 10px;
    margin-bottom: 20px;
    border-bottom: 1px solid var(--border); /* Optional: A separator line */
    padding-bottom: 10px;
    justify-content: flex-start; /* Align tabs to the start */
}

.case-study-category-tab {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border: 1px solid var(--border);
    padding: 10px 15px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    font-weight: 500;
    white-space: nowrap; /* Prevent text wrapping within tabs */
}

.case-study-category-tab.active,
.case-study-category-tab:hover {
    background-color: var(--primary);
    color: white;
    border-color: var(--primary);
    box-shadow: var(--shadow-hover);
    transform: translateY(-2px);
}

.case-study-category-tab i {
    margin-right: 8px;
}

#caseStudiesGrid {
    /* Inherits .tools-grid or .tools-list styling from app.js based on viewMode */
    gap: 20px; /* Consistent gap with other grids */
}

/* Specific styling for .tool-card when it's a case study */
/* It already uses .tool-card, so general .tool-card styling applies */

/* Adjusting tool-card content for better responsiveness in list view */
.tools-list .tool-card {
    flex-direction: row; /* Keep content in a row in list view */
    align-items: flex-start;
    padding: 15px 20px;
}

.tools-list .tool-card .tool-header {
    flex-direction: row; /* Keep header elements in a row */
    justify-content: space-between;
    align-items: center;
    width: 100%; /* Take full width */
}

.tools-list .tool-card .tool-header > div {
    flex: 1; /* Allow header text to take available space */
}

.tools-list .tool-card .tool-title {
    flex-wrap: wrap; /* Allow title elements to wrap if needed */
}

.tools-list .tool-card .tool-actions {
    flex-wrap: nowrap; /* Prevent action buttons from wrapping too much */
    margin-left: 15px; /* Space between title and actions */
    align-self: flex-start; /* Align actions to the top in list view */
}

.tools-list .tool-card p {
    flex-basis: 100%; /* Force paragraphs to full width below header */
    margin-top: 10px;
}

.tools-list .tool-card .tool-tags {
    flex-basis: 100%; /* Force tags to full width */
    margin-top: 10px;
}

/* ===================================== */
/* Case Study Modals (Add/Edit/Preview) */
/* ===================================== */

/* Inherits general .modal and .modal-content styling, but refine for content */
#addCaseStudyModal .modal-content,
#editCaseStudyModal .modal-content,
#caseStudyPreviewModal .modal-content {
    max-width: 700px; /* Slightly wider for article content */
    width: 90%;
    max-height: 90vh; /* Allow scrolling for long content */
    overflow-y: auto;
    padding: 30px; /* More internal padding */
}

#caseStudyPreviewModal .modal-content {
    padding-bottom: 20px; /* Adjust padding for bottom buttons */
}

/* Specific input/textarea styling within modals */
#addCaseStudyModal .form-group input[type="text"],
#addCaseStudyModal .form-group input[type="url"],
#addCaseStudyModal .form-group textarea,
#editCaseStudyModal .form-group input[type="text"],
#editCaseStudyModal .form-group input[type="url"],
#editCaseStudyModal .form-group textarea {
    width: 100%; /* Full width inputs */
    padding: 10px;
    border: 1px solid var(--border-light);
    border-radius: 8px;
    background: var(--bg-tertiary);
    color: var(--text-primary);
    box-sizing: border-box; /* Include padding in width */
}

#addCaseStudyModal .form-group select,
#editCaseStudyModal .form-group select {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--border-light);
    border-radius: 8px;
    background: var(--bg-tertiary);
    color: var(--text-primary);
    box-sizing: border-box;
    -webkit-appearance: none; /* Remove default arrow on select */
    -moz-appearance: none;
    appearance: none;
    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%20viewBox%3D%220%200%20292.4%20292.4%22%3E%3Cpath%20fill%3D%22%236c757d%22%20d%3D%22M287%2C197.9c-3.1%2C3.1-7.1%2C4.7-11.2%2C4.7s-8.2-1.6-11.2-4.7L146.2%2C87.4L27.9%2C197.9c-3.1%2C3.1-7.1%2C4.7-11.2%2C4.7s-8.2-1.6-11.2-4.7c-6.2-6.2-6.2-16.4%2C0-22.6L135%2C64.9c3.1-3.1%2C7.1-4.7%2C11.2-4.7c4.1%2C0%2C8.2%2C1.6%2C11.2%2C4.7l117.3%2C110.4C293.2%2C181.5%2C293.2%2C191.7%2C287%2C197.9z%22%2F%3E%3C%2Fsvg%3E'); /* Custom arrow */
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-size: 10px;
}

/* Read-only inputs in preview modal should be clearly styled as non-editable */
#caseStudyPreviewModal .form-group input[readonly],
#caseStudyPreviewModal .form-group textarea[readonly] {
    opacity: 0.8;
    cursor: default;
}


/* ===================================== */
/* Media Queries for Responsiveness */
/* ===================================== */

/* Tablets and smaller desktops (e.g., 768px to 1024px) */
@media (max-width: 1024px) {
    .dashboard {
        padding: 15px; /* Reduce padding on dashboard */
    }

    .header-content {
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px;
    }

    .controls {
        width: 100%;
        justify-content: center;
        margin-top: 10px;
        flex-wrap: wrap;
        gap: 10px;
    }

    .search-container {
        width: 100%;
        max-width: 400px;
    }

    .btn {
        padding: 8px 12px;
        font-size: 0.9em;
    }

    #caseStudyParentTabs {
        justify-content: center; /* Center align tabs on smaller screens */
    }

    /* Modals adjustments */
    #addCaseStudyModal .modal-content,
    #editCaseStudyModal .modal-content,
    #caseStudyPreviewModal .modal-content {
        max-width: 600px;
        width: 95%;
        padding: 25px;
    }
}

/* Mobile devices (e.g., up to 767px) */
@media (max-width: 767px) {
    body {
        font-size: 14px;
    }

    .header-content {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    .header-controls-expanded {
        flex-direction: column;
        align-items: center;
        gap: 10px;
    }

    .search-container {
        flex-direction: column;
        align-items: stretch;
    }

    .search-input,
    .search-icon,
    #searchScopeSelect {
        width: 100%; /* Full width for search elements */
    }
    #searchScopeSelect {
        margin-top: 5px;
    }

    .controls {
        flex-direction: column;
        align-items: stretch;
        gap: 8px;
    }

    .controls button {
        width: 100%; /* Full width buttons */
    }

    .nav-tabs.main-nav-tabs {
        overflow-x: auto; /* Allow horizontal scrolling for main tabs */
        white-space: nowrap; /* Prevent tabs from wrapping */
        padding-bottom: 5px; /* Space for scrollbar */
        justify-content: flex-start; /* Align to start for scroll */
    }

    .nav-tab {
        flex: 0 0 auto; /* Prevent tabs from shrinking */
        padding: 8px 10px;
        font-size: 0.85em;
    }

    /* Adjust tools grid for mobile */
    .tools-grid {
        grid-template-columns: 1fr; /* Single column on mobile */
    }

    /* Ensure list view looks good on mobile too */
    .tools-list .tool-card {
        padding: 10px 15px;
    }

    .tools-list .tool-card .tool-header {
        flex-direction: column; /* Stack header elements vertically */
        align-items: flex-start;
        gap: 8px;
    }

    .tools-list .tool-card .tool-actions {
        margin-left: 0;
        margin-top: 10px; /* Space below title */
        width: 100%; /* Take full width */
        justify-content: flex-start;
        flex-wrap: wrap;
        gap: 5px; /* Smaller gap for buttons */
    }

    /* Modals for mobile */
    #addCaseStudyModal .modal-content,
    #editCaseStudyModal .modal-content,
    #caseStudyPreviewModal .modal-content {
        width: 95%; /* Take almost full width */
        padding: 20px;
        margin: 10px auto; /* More margin from edges */
    }

    #caseStudyPreviewModal .modal-content .form-group label {
        font-size: 0.9em; /* Smaller label text */
    }
}

/* Landscape orientation for small phones */
@media (max-width: 500px) and (orientation: landscape) {
    /* Adjustments if needed for very narrow landscape views */
    .nav-tabs.main-nav-tabs {
        justify-content: flex-start;
    }
}

/* Accordion Container */
.accordion-container {
    width: 100%;
    margin-top: 20px;
    border-radius: 12px;
    overflow: hidden; /* Ensures borders/shadows within items don't bleed */
}

/* Individual Accordion Item */
.accordion-item {
    background-color: var(--bg-secondary);
    border: 1px solid var(--border);
    margin-bottom: 10px; /* Space between items */
    border-radius: 8px;
    transition: all 0.3s ease; /* Smooth transition for active state */
    box-shadow: var(--shadow);
}

.accordion-item:last-child {
    margin-bottom: 0; /* No margin after the last item */
}

/* Accordion Header (the clickable button) */
.accordion-header {
    background-color: var(--bg-tertiary); /* Slightly lighter/darker than item bg */
    color: var(--text-primary);
    padding: 18px 20px;
    width: 100%;
    text-align: left;
    border: none;
    cursor: pointer;
    outline: none;
    transition: background-color 0.3s ease, color 0.3s ease;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: 8px; /* Match item border-radius */
    font-size: 1.1em;
    font-weight: 600;
}

.accordion-header h3 {
    margin: 0; /* Remove default h3 margin */
    font-size: 1.1em; /* Keep it consistent with button font size */
    display: flex;
    align-items: center;
    color: var(--text-primary);
}

.accordion-header:hover {
    background-color: var(--bg-hover); /* Subtle hover effect */
    color: var(--primary); /* Highlight text on hover */
}

/* Icon within the header */
.accordion-icon {
    margin-left: 15px;
    transition: transform 0.3s ease;
}

/* Rotates the icon when the accordion is active */
.accordion-item.active .accordion-icon {
    transform: rotate(180deg);
}

/* Accordion Content */
.accordion-content {
    background-color: var(--bg-secondary);
    overflow: hidden;
    max-height: 0;
    transition: max-height 0.4s ease-out, padding 0.4s ease-out;
    padding: 0 20px; /* Initial padding when collapsed */
}

/* Active content styling (when expanded) */
.accordion-item.active .accordion-content {
    padding: 20px 20px 25px 20px; /* Top, Right, Bottom, Left padding - increased bottom */
    border-top: 1px solid var(--border-light); /* Separator line */
}

/* List styling within accordion content */
.accordion-content ul {
    list-style: none; /* Remove default bullets */
    padding: 0;
    margin: 0;
}

.accordion-content ul li {
    padding: 8px 0;
    border-bottom: 1px dashed var(--border-light); /* Light separator for list items */
    font-size: 0.95em;
    color: var(--text-secondary);
}

.accordion-content ul li:last-child {
    border-bottom: none; /* No border for the last list item */
    margin-bottom: 40px;
}

.accordion-content strong {
    color: var(--accent); /* Highlight tool names */
}

/* Adjust h2/p styling for general catalog intro */
.handbook-content h2, .handbook-content p {
    margin-top: 0; /* Reset top margin for first elements in section */
}

.handbook-content p:first-of-type {
    margin-bottom: 20px; /* Space out intro paragraph from accordions */
}

/* OSINTrix Gradient Highlight */
.osintrix-highlight {
    font-weight: bold; /* Keep it bold */
    /* Adjust these colors to match your dark theme's primary and secondary tones */
    background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    display: inline-block; /* Essential for background-clip to work on text */
    /* Keep a subtle text-shadow if it helps visibility, adjust opacity */
    text-shadow: 0px 0px 2px rgba(0, 0, 0, 0.4); /* Subtle dark shadow for contrast */
}

/* Specific adjustment for dark theme if your theme has distinct dark/light mode variables */
body[data-theme="dark"] .osintrix-highlight {
    /* Use colors that are visible but not overly bright in a dark theme.
       Example: A transition from your primary/accent to a slightly lighter/more vibrant version of them.
       Or, a subtle shift in hue.
       
       Let's try a cooler, more digital-like gradient that fits a cyber theme,
       using colors that might be similar to `var(--primary)` and `var(--accent)` but perhaps slightly desaturated
       or a shade lighter/darker depending on desired contrast.
    */
    background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%); /* Sticking to your theme vars */
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    /* Increase shadow for dark theme if text needs to pop more */
    text-shadow: 0px 0px 5px rgba(0, 255, 255, 0.2), 0px 0px 10px rgba(0, 255, 255, 0.1); /* Lighter shadow for glow */
}
